{"version":3,"sources":["App.js","theme.js","Site/Navbar.js","Table/CompareToaster.js","common/LazyLoadingFallback.js","Search/SearchBar.js","Search/SearchPage.js","common/useDebounce.js","routes.js","rhlConfig.js","serviceWorker.js","index.js","actions.js","actionTypes.js","Site/Logo.js","rootReducer.js","rootEpic.js","store.js","usda.js"],"names":["hot","module","history","basename","process","className","theme","routes","createMuiTheme","palette","primary","pink","secondary","purple","status","error","red","danger","orange","Navbar","pathname","useLocation","test","position","variant","SpaceBar","props","css","CompareToaster","withRouter","compare","compareClear","compareRemove","location","isVisible","length","useState","isExpanded","setIsExpanded","ids","map","join","onClick","item","key","ndbno","title","report","desc","name","to","fallbackName","amount","style","display","mapDispatchToProps","connect","state","app","reports","LazyLoadingFallback","query","setQuery","dataSource","setDataSource","handleDataSourceChange","event","target","value","type","onChange","autoFocus","dataSourceIdentifiers","identifier","checked","decodeDataSourceIdentifier","SearchResult","React","lazy","search","push","searching","searchQuery","searchDataSource","result","searchResult","searchError","debouncedQuery","timeout","setState","useEffect","handler","setTimeout","clearTimeout","useDebounce","urlParams","URLSearchParams","has","any","decodeURIComponent","get","trim","Box","mr","Logo","fallback","ReportPage","TablePage","path","exact","component","SearchPage","setConfig","reloadHooks","logLevel","Boolean","window","hostname","match","store","createStore","navigator","serviceWorker","ready","then","registration","unregister","ReactDOM","render","App","document","getElementById","SET_QUERY","payload","SET_DATA_SOURCE","SEARCH","searchFulfilled","SEARCH_FULFILLED","searchRejected","SEARCH_REJECTED","getReport","GET_REPORT","getReportFulfilled","GET_REPORT_FULFILLED","getReportRejected","GET_REPORT_REJECTED","setMass","mass","SET_MASS","compareSet","COMPARE_SET","compareInsert","COMPARE_UPSERT","COMPARE_REMOVE","COMPARE_CLEAR","AdaptedTypography","withStyles","root","color","white","undefined","Typography","RouterLink","initialState","appReducer","console","log","getReportNDBNO","gettingReport","getReportResult","getReportError","uniqBy","filter","USDA_API_KEY","rootEpic","combineEpics","action$","state$","pipe","ofType","debounceTime","action","tap","mergeMap","ajax","getJSON","encodeURIComponent","dataSourceCode","BOTH","STANDARD_REFERENCE","BRANDED_FOOD_PRODUCTS","response","errors","catchError","of","xhr","foods","food","epicMiddleware","createEpicMiddleware","createBrowserHistory","configureStore","preloadedState","combineReducers","router","connectRouter","compose","applyMiddleware","routerMiddleware","__REDUX_DEVTOOLS_EXTENSION__","f","run","groupOrder","sortNutrientsByGroup","nutrients","sort","compareNutrients","a","b","indexOf","group","groupOrderNumber","nutrient","groupByNutrientGroup","groupBy","dataSourceIdentifierLookup","Object","keys","getNutrient","find","getNutrientValue","Number","pivotNutrients","reduce","referenceIntake","Energy","Cholesterol","Protein","Riboflavin","Thiamin","Niacin","labels","getDatum","factor","precision","round","unit","getReference"],"mappings":"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","file":"static/js/main.0f0ecf9c.chunk.js","sourcesContent":["import React from \"react\";\nimport { hot } from \"react-hot-loader\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { ThemeProvider } from \"@material-ui/core/styles\";\n\nimport theme from \"./theme\";\nimport { history } from \"./store.js\";\n\nimport Navbar from \"./Site/Navbar\";\nimport CompareToaster from \"./Table/CompareToaster\";\n\nimport routes from \"./routes\";\n\nimport \"./App.css\";\n\nconst App = () => {\n  return (\n    <ConnectedRouter history={history} basename={process.env.PUBLIC_URL}>\n      <div className=\"App\">\n        <ThemeProvider theme={theme}>\n          <Navbar />\n          <CompareToaster />\n          {routes}\n        </ThemeProvider>\n      </div>\n    </ConnectedRouter>\n  );\n};\n\n// this hot(module)(Component) call proved to be the secret sauce!\n// It is important that this hot component lives in it's own file.\nexport default hot(module)(App);\n","import { createMuiTheme } from \"@material-ui/core/styles\";\nimport pink from \"@material-ui/core/colors/pink\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport red from \"@material-ui/core/colors/red\";\nimport orange from \"@material-ui/core/colors/orange\";\n\nexport const theme = createMuiTheme({\n  palette: {\n    primary: pink,\n    secondary: purple,\n  },\n  status: {\n    error: red,\n    danger: orange,\n  },\n});\n\nexport default theme;\n","import React from \"react\";\nimport { useLocation } from \"react-router\";\n\nimport { AppBar, Toolbar } from \"@material-ui/core\";\n\nimport Logo from \"./Logo\";\n\nexport const Navbar = () => {\n  const { pathname } = useLocation();\n  if (/^\\/$/.test(pathname) || /^\\/search/.test(pathname)) return null;\n  return (\n    <AppBar position=\"static\">\n      <Toolbar>\n        <Logo variant=\"white\" />\n      </Toolbar>\n    </AppBar>\n  );\n};\n\nexport default Navbar;\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { css } from \"emotion\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { map } from \"lodash\";\n\nimport { compareClear, compareRemove } from \"../actions\";\n\nconst SpaceBar = (props) => (\n  <div\n    className={css`\n      display: flex;\n      justify-content: space-between;\n      padding: 0.5rem;\n    `}\n    {...props}\n  />\n);\n\nexport const CompareToaster = withRouter(\n  ({ compare, compareClear, compareRemove, location }) => {\n    const isVisible = compare.length > 0 && location.pathname !== \"/compare\";\n    const [isExpanded, setIsExpanded] = useState(true);\n    const ids = map(compare, \"ndbno\").join(\",\");\n    return (\n      <div\n        className={css`\n          display: ${isVisible ? \"initial\" : \"none\"};\n          position: fixed;\n          bottom: 0;\n          right: 5rem;\n          border: 1px solid black;\n          border-bottom: none;\n          background-color: white;\n          min-width: 300px;\n        `}\n      >\n        <div\n          className={css`\n            display: flex;\n            justify-content: space-between;\n            background-color: #eaeaea;\n            padding: 0.5rem;\n          `}\n          onClick={() => setIsExpanded(!isExpanded)}\n        >\n          <h3\n            className={css`\n              margin: 0;\n            `}\n          >\n            Collection <small>({compare.length})</small>\n          </h3>\n          {isExpanded ? \" ðŸ”¼\" : \" ðŸ”½\"}\n        </div>\n        <table\n          className={css`\n            display: ${isExpanded ? \"visible\" : \"none\"};\n            margin: 0;\n            margin-top: 0.5rem;\n            padding: 0.5rem;\n          `}\n        >\n          <tbody>\n            {compare.map((item) => (\n              <tr key={item.ndbno}>\n                <td\n                  className={css`\n                    max-width: 200px;\n                    text-overflow: ellipsis;\n                    overflow: hidden;\n                    white-space: nowrap;\n                  `}\n                  title={item.report ? item.report.desc.name : item.ndbno}\n                >\n                  <Link to={`/report/${item.ndbno}`}>\n                    {item.report ? item.report.desc.name : item.fallbackName}\n                  </Link>\n                </td>\n                <td>{item.amount} g</td>\n                <td>\n                  <button onClick={() => compareRemove(item.ndbno)}>X</button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        <SpaceBar\n          style={{\n            display: isExpanded ? \"flex\" : \"none\",\n          }}\n        >\n          <button onClick={compareClear}>Clear Collection</button>\n          <Link to={`/compare?ids=${ids}`}>Go to Collection</Link>\n        </SpaceBar>\n      </div>\n    );\n  }\n);\n\nconst mapStateToProps = (state) => ({\n  compare: state.app.compare.map((item) => ({\n    ...item,\n    report: state.app.reports[item.ndbno],\n  })),\n});\n\nconst mapDispatchToProps = {\n  compareClear,\n  compareRemove,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CompareToaster);\n","import React from \"react\";\n\nexport const LazyLoadingFallback = () => {\n  return <div>Loading...</div>;\n};\n\nexport default LazyLoadingFallback;\n","import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setQuery, setDataSource, search } from \"../actions\";\nimport { dataSourceIdentifiers, decodeDataSourceIdentifier } from \"../usda\";\nimport { push } from \"connected-react-router\";\nimport useDebounce from \"../common/useDebounce\";\n\nconst SearchBar = ({ query, setQuery, dataSource, setDataSource }) => {\n  const handleInputChange = (event) => {\n    setQuery(event.target.value);\n  };\n\n  const handleDataSourceChange = (event) => {\n    setDataSource(event.target.value);\n  };\n\n  return (\n    <div className=\"SearchBar\">\n      <label>\n        <input\n          type=\"text\"\n          className=\"queryInput\"\n          value={query}\n          onChange={handleInputChange}\n          autoFocus\n        />\n      </label>\n      <br />\n      Data Source:&nbsp;\n      {dataSourceIdentifiers.map((identifier) => (\n        <label className=\"dataSourceInputLabel\" key={identifier}>\n          <input\n            type=\"radio\"\n            className=\"dataSourceInput\"\n            value={identifier}\n            checked={dataSource === identifier}\n            onChange={handleDataSourceChange}\n          ></input>\n          {decodeDataSourceIdentifier(identifier)}\n        </label>\n      ))}\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  // searchQuery: state.app.searchQuery,\n  // searchDataSource: state.app.searchDataSource,\n});\n\nconst mapDispatchToProps = {\n  // setQuery,\n  // setDataSource,\n  // search,\n  // push,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);\n","import React, { Suspense, useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport SearchBar from \"./SearchBar\";\nimport { setQuery, setDataSource, search } from \"../actions\";\nimport Logo from \"../Site/Logo\";\n// import { decodeDataSourceIdentifier } from \"../usda\";\nimport { push } from \"connected-react-router\";\nimport LazyLoadingFallback from \"../common/LazyLoadingFallback\";\nimport { Box } from \"@material-ui/core\";\nimport useDebounce from \"../common/useDebounce\";\nimport { get } from \"lodash\";\n\nconst SearchResult = React.lazy(() => import(\"./SearchResult\"));\n\nconst decodeDataSource = (ds) =>\n  ({\n    any: \"BOTH\",\n    \"Standard Reference\": \"STANDARD_REFERENCE\",\n    \"Branded Food Products\": \"BRANDED_FOOD_PRODUCTS\",\n  }[ds]);\n\nconst SearchPage = ({ push, location, search, searching, error, result }) => {\n  const [query, setQuery] = useState(\"\");\n  const debouncedQuery = useDebounce(query, 100);\n  const [dataSource, setDataSource] = useState(\"STANDARD_REFERENCE\");\n\n  useEffect(() => {\n    const urlParams = new URLSearchParams(location.search);\n    if (urlParams.has(\"dataSource\"))\n      setDataSource(\n        decodeDataSource(decodeURIComponent(urlParams.get(\"dataSource\")))\n      );\n    if (urlParams.has(\"query\"))\n      setQuery(decodeURIComponent(urlParams.get(\"query\")));\n  }, [location]);\n\n  useEffect(() => {\n    if (!searching && get(result, \"list.item.length\", 0) > 0)\n      push(\n        `?query=${get(result, \"list.q\")}&dataSource=${get(result, \"list.ds\")}`\n      );\n  }, [push, result, searching]);\n\n  useEffect(() => {\n    if (debouncedQuery && debouncedQuery.trim().length > 0)\n      search(debouncedQuery, dataSource);\n  }, [debouncedQuery, dataSource, search]);\n\n  return (\n    <div className=\"SearchPage\">\n      <div className=\"header\">\n        <Box mr={3}>\n          <Logo />\n        </Box>\n        <SearchBar\n          query={query}\n          setQuery={setQuery}\n          dataSource={dataSource}\n          setDataSource={setDataSource}\n        />\n      </div>\n      <hr />\n      <div className=\"ResultContainer\">\n        <Suspense fallback={<LazyLoadingFallback />}>\n          <SearchResult\n            query={query}\n            result={result}\n            error={error}\n            searching={searching}\n            dataSource={dataSource}\n          />\n        </Suspense>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => ({\n  searching: state.app.searching,\n  query: state.app.searchQuery,\n  dataSource: state.app.searchDataSource,\n  result: state.app.searchResult,\n  // items: get(state.app.searchResult, 'list.item'),\n  error: state.app.searchError,\n});\n\nconst mapDispatchToProps = {\n  setQuery,\n  setDataSource,\n  search,\n  push,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPage);\n","import { useState, useEffect } from \"react\";\n\nexport default (value, timeout) => {\n  const [state, setState] = useState(value);\n\n  useEffect(() => {\n    const handler = setTimeout(() => setState(value), timeout);\n\n    return () => clearTimeout(handler);\n  }, [value, timeout]);\n\n  return state;\n};\n","import React, { Suspense } from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\n\nimport LazyLoadingFallback from \"./common/LazyLoadingFallback\";\n\nimport SearchPage from \"./Search/SearchPage\";\nconst ReportPage = React.lazy(() => import(\"./Report/ReportPage\"));\nconst TablePage = React.lazy(() => import(\"./Table/TablePage\"));\n\nexport const routes = (\n  <Suspense fallback={<LazyLoadingFallback />}>\n    <Switch>\n      <Route path=\"/\" exact component={SearchPage} />\n      <Route path=\"/search\" exact component={SearchPage} />\n      <Route path=\"/report/:ndbno\" component={ReportPage} />\n      <Route path=\"/compare\" exact component={TablePage} />\n    </Switch>\n  </Suspense>\n);\n\nexport default routes;\n","import { setConfig } from \"react-hot-loader\";\n\nsetConfig({\n  // This means hooks won't be run again when a component gets hot-swapped.\n  // That's both a blessing and a course: An useEffect that makes and API call\n  // won't run again so we don't have to wait for the request to be done until\n  // the component is ready. On the other hand, changes to hook bodies will\n  // require a manual reload of the page.\n  reloadHooks: false,\n  logLevel: \"log\",\n});\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import \"./rhlConfig\"; // Needs to be in a separate file and needs to be first\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport createStore from \"./store.js\";\nimport { Provider } from \"react-redux\";\n\nconst store = createStore();\n\nconst render = () => {\n  ReactDOM.render(\n    // The store provider has to be outside of the hot App so that it won't be\n    // reloaded when there's an update\n    <Provider store={store}>\n      <App />\n    </Provider>,\n    document.getElementById(\"root\")\n  );\n};\n\nserviceWorker.unregister();\n\nrender();\n","import {\n  SEARCH,\n  SEARCH_FULFILLED,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_FULFILLED,\n  GET_REPORT_REJECTED,\n  SET_QUERY,\n  SET_DATA_SOURCE,\n  SET_MASS,\n  COMPARE_UPSERT,\n  COMPARE_REMOVE,\n  COMPARE_SET,\n  COMPARE_CLEAR,\n} from \"./actionTypes\";\n\nexport const setQuery = (query) => ({ type: SET_QUERY, payload: query });\nexport const setDataSource = (dataSource) => ({\n  type: SET_DATA_SOURCE,\n  payload: dataSource,\n});\nexport const search = (query, dataSource) => ({\n  type: SEARCH,\n  payload: { query, dataSource },\n});\nexport const searchFulfilled = (result) => ({\n  type: SEARCH_FULFILLED,\n  payload: result,\n});\nexport const searchRejected = (result) => ({\n  type: SEARCH_REJECTED,\n  payload: result,\n});\nexport const getReport = (ndbno) => ({ type: GET_REPORT, payload: ndbno });\nexport const getReportFulfilled = (result) => ({\n  type: GET_REPORT_FULFILLED,\n  payload: result,\n});\nexport const getReportRejected = (result) => ({\n  type: GET_REPORT_REJECTED,\n  payload: result,\n});\nexport const setMass = (mass) => ({ type: SET_MASS, payload: mass });\nexport const compareSet = (compare) => ({\n  type: COMPARE_SET,\n  payload: compare,\n});\nexport const compareInsert = (ndbno, amount, fallbackName) => ({\n  type: COMPARE_UPSERT,\n  payload: { ndbno, amount, fallbackName },\n});\nexport const compareUpdate = compareInsert;\nexport const compareRemove = (ndbno) => ({\n  type: COMPARE_REMOVE,\n  payload: ndbno,\n});\nexport const compareClear = () => ({\n  type: COMPARE_CLEAR,\n});\n","export const SET_QUERY = \"SET_QUERY\";\nexport const SET_DATA_SOURCE = \"SET_DATA_SOURCE\";\nexport const SEARCH = \"SEARCH\";\nexport const SEARCH_FULFILLED = \"SEARCH_FULFILLED\";\nexport const SEARCH_REJECTED = \"SEARCH_REJECTED\";\nexport const GET_REPORT = \"GET_REPORT\";\nexport const GET_REPORT_FULFILLED = \"GET_REPORT_FULFILLED\";\nexport const GET_REPORT_REJECTED = \"GET_REPORT_REJECTED\";\nexport const SET_MASS = \"SET_MASS\";\nexport const COMPARE_SET = \"COMPARE_SET\";\nexport const COMPARE_UPSERT = \"COMPARE_UPSERT\";\nexport const COMPARE_REMOVE = \"COMPARE_REMOVE\";\nexport const COMPARE_CLEAR = \"COMPARE_CLEAR\";\n","import React from \"react\";\nimport { Link as RouterLink } from \"react-router-dom\";\nimport { Typography, Link, withStyles } from \"@material-ui/core\";\n\nexport const Logo = ({ variant }) => {\n  const AdaptedTypography = withStyles({\n    root: {\n      color: { white: \"white\", primary: undefined }[variant],\n    },\n  })(Typography);\n\n  return (\n    <Link component={RouterLink} to=\"/search\">\n      <AdaptedTypography variant=\"h5\">USDA Frontend</AdaptedTypography>\n    </Link>\n  );\n};\n\nexport default Logo;\n","import {\n  SEARCH,\n  SEARCH_FULFILLED,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_FULFILLED,\n  GET_REPORT_REJECTED,\n  SET_QUERY,\n  SET_DATA_SOURCE,\n  SET_MASS,\n  COMPARE_SET,\n  COMPARE_UPSERT,\n  COMPARE_REMOVE,\n  COMPARE_CLEAR,\n} from \"./actionTypes\";\nimport { combineReducers } from \"redux\";\nimport { connectRouter } from \"connected-react-router\";\nimport { uniqBy } from \"lodash\";\n\nconst initialState = {\n  searching: false,\n  searchQuery: \"\",\n  searchDataSource: \"STANDARD_REFERENCE\",\n  mass: 100,\n  reports: {},\n  compare: [],\n};\n\nconst appReducer = (state = initialState, { type, payload }) => {\n  console.log(type, payload);\n  switch (type) {\n    case SET_QUERY:\n      return {\n        ...state,\n        searchQuery: payload,\n        searchResult: undefined,\n        searchError: undefined,\n      };\n\n    case SET_DATA_SOURCE:\n      return {\n        ...state,\n        searchDataSource: payload,\n        searchResult: undefined,\n        searchError: undefined,\n      };\n\n    case SEARCH:\n      // if (payload.query === \"\") {\n      //   return {\n      //     ...state,\n      //     searching: false,\n      //     searchResult: undefined,\n      //     searchError: undefined,\n      //   };\n      // } else {\n      return {\n        ...state,\n        searching: true,\n        searchResult: undefined,\n        searchError: undefined,\n      };\n    // }\n\n    case SEARCH_FULFILLED:\n      return { ...state, searchResult: payload, searching: false };\n\n    case SEARCH_REJECTED:\n      return { ...state, searchError: payload, searching: false };\n\n    case GET_REPORT:\n      return {\n        ...state,\n        getReportNDBNO: payload,\n        gettingReport: true,\n        getReportResult: undefined,\n        getReportError: undefined,\n      };\n\n    case GET_REPORT_FULFILLED:\n      return {\n        ...state,\n        getReportResult: payload,\n        gettingReport: false,\n        getReportNDBNO: undefined,\n        reports: { ...state.reports, [payload.desc.ndbno]: payload },\n      };\n\n    case GET_REPORT_REJECTED:\n      return {\n        ...state,\n        getReportError: payload,\n        gettingReport: false,\n        getReportNDBNO: undefined,\n      };\n\n    case SET_MASS:\n      return { ...state, mass: payload };\n\n    case COMPARE_SET:\n      return { ...state, compare: payload };\n\n    case COMPARE_UPSERT:\n      return {\n        ...state,\n        compare: uniqBy([payload, ...state.compare], \"ndbno\"),\n      };\n\n    case COMPARE_REMOVE:\n      return {\n        ...state,\n        compare: state.compare.filter((item) => item.ndbno !== payload),\n      };\n    case COMPARE_CLEAR:\n      return {\n        ...state,\n        compare: initialState.compare,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default (history) =>\n  combineReducers({\n    router: connectRouter(history),\n    app: appReducer,\n  });\n","import { ajax } from \"rxjs/ajax\";\nimport {\n  mergeMap,\n  map,\n  catchError,\n  debounceTime,\n  filter,\n  tap,\n} from \"rxjs/operators\";\nimport { ofType, combineEpics } from \"redux-observable\";\nimport {\n  SEARCH,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_REJECTED,\n} from \"./actionTypes\";\nimport {\n  searchFulfilled,\n  searchRejected,\n  getReportRejected,\n  getReportFulfilled,\n} from \"./actions\";\nimport { of } from \"rxjs\";\n\nconst USDA_API_KEY = \"FYTSTF75mesLeO85VFSKvqgWEzdL0hQAYCZUtjJk\";\n\nconst encodeDataSource = (dataSourceCode) =>\n  ({\n    BOTH: encodeURIComponent(\"\"),\n    STANDARD_REFERENCE: encodeURIComponent(\"Standard Reference\"),\n    BRANDED_FOOD_PRODUCTS: encodeURIComponent(\"Branded Food Products\"),\n  }[dataSourceCode]);\n\nconst searchEpic = (action$, state$) =>\n  action$.pipe(\n    ofType(SEARCH),\n    debounceTime(500),\n    filter((action) => action.payload.query !== \"\"),\n    tap(console.log(state$.value)),\n    mergeMap((action) =>\n      ajax\n        .getJSON(\n          `https://api.nal.usda.gov/ndb/search?api_key=${USDA_API_KEY}&q=${encodeURIComponent(\n            action.payload.query\n          )}&ds=${encodeDataSource(action.payload.dataSource)}`\n        )\n        .pipe(\n          map((response) =>\n            response.errors\n              ? searchRejected(response)\n              : searchFulfilled(response)\n          ),\n          catchError((error) =>\n            of({\n              type: SEARCH_REJECTED,\n              payload: error.xhr.response,\n              error: true,\n            })\n          )\n        )\n    )\n  );\n\nconst getReportEpic = (action$) =>\n  action$.pipe(\n    ofType(GET_REPORT),\n    debounceTime(500),\n    mergeMap((action) =>\n      ajax\n        .getJSON(\n          `https://api.nal.usda.gov/ndb/V2/reports?api_key=${USDA_API_KEY}&ndbno=${encodeURIComponent(\n            action.payload\n          )}`\n        )\n        .pipe(\n          map((response) =>\n            response.foods[0].error\n              ? getReportRejected(response)\n              : getReportFulfilled(response.foods[0].food)\n          ),\n          catchError((error) =>\n            of({\n              type: GET_REPORT_REJECTED,\n              payload: error.xhr.response,\n              error: true,\n            })\n          )\n        )\n    )\n  );\n\nconst rootEpic = combineEpics(searchEpic, getReportEpic);\nexport default rootEpic;\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { createBrowserHistory } from \"history\";\nimport { routerMiddleware } from \"connected-react-router\";\nimport rootReducer from \"./rootReducer.js\";\nimport rootEpic from \"./rootEpic.js\";\n\nconst epicMiddleware = createEpicMiddleware();\nexport const history = createBrowserHistory({\n  basename: process.env.PUBLIC_URL + \"/\",\n});\n\nexport default function configureStore(preloadedState) {\n  const store = createStore(\n    rootReducer(history),\n    preloadedState,\n    compose(\n      applyMiddleware(routerMiddleware(history), epicMiddleware),\n      window.__REDUX_DEVTOOLS_EXTENSION__ &&\n        process.env.NODE_ENV === \"development\"\n        ? window.__REDUX_DEVTOOLS_EXTENSION__()\n        : (f) => f\n    )\n  );\n\n  epicMiddleware.run(rootEpic);\n\n  return store;\n}\n","import { groupBy, find, round } from \"lodash\";\n\nexport const groupOrder = [\n  \"Proximates\",\n  \"Lipids\",\n  \"Vitamins\",\n  \"Minerals\",\n  \"Other\",\n];\n\nexport const sortNutrientsByGroup = (nutrients) => {\n  return nutrients.sort(compareNutrients);\n};\n\nexport const compareNutrients = (a, b) => {\n  return groupOrder.indexOf(a.group) - groupOrder.indexOf(b.group);\n};\n\nexport const groupOrderNumber = (nutrient) => {\n  return groupOrder.indexOf(nutrient.group);\n};\n\nexport const groupByNutrientGroup = (nutrients) => groupBy(nutrients, \"group\");\n\nexport const dataSourceIdentifierLookup = {\n  BOTH: \"Any\",\n  STANDARD_REFERENCE: \"Standard Reference\",\n  BRANDED_FOOD_PRODUCTS: \"Branded Food Products\",\n};\n\nexport const dataSourceIdentifiers = Object.keys(dataSourceIdentifierLookup);\n\nexport const decodeDataSourceIdentifier = (identifier) =>\n  dataSourceIdentifierLookup[identifier];\n\nexport const getNutrient = (food, name) => find(food.nutrients, { name });\n\nexport const getNutrientValue = (food, name) =>\n  Number(getNutrient(food, name) ? getNutrient(food, name).value : undefined);\n\nexport const pivotNutrients = (report) => ({\n  ...report,\n  nutrients: report.nutrients.reduce(\n    (nutrients, nutrient) => ({ ...nutrients, [nutrient.name]: nutrient }),\n    {}\n  ),\n});\n\nexport const referenceIntake = {\n  Energy: 2000,\n  \"Total lipid (fat)\": 67,\n  \"Fatty acids, total saturated\": 20,\n  Cholesterol: 300,\n  \"Carbohydrate, by difference\": 300,\n  \"Fiber, total dietary\": 25,\n  Protein: 50,\n  \"Vitamin C, total ascorbic acid\": 60,\n  \"Vitamin B-6\": 1.2,\n  \"Vitamin B-12\": 6,\n  \"Vitamin E (alpha-tocopherol)\": 15,\n  \"Vitamin K (phylloquinone)\": 120,\n  Riboflavin: 1.1,\n  Thiamin: 1.1,\n  Niacin: 14,\n  \"Folate, DFE\": 400,\n  \"Vitamin A, RAE\": 600,\n  \"Vitamin D\": 800,\n  \"Vitamin D (D2 + D3)\": 20,\n  \"Calcium, Ca\": 1000,\n  \"Iron, Fe\": 19,\n  \"Magnesium, Mg\": 420,\n  \"Phosphorus, P\": 700,\n  \"Sodium, Na\": 2400,\n  \"Potassium, K\": 3533,\n  \"Zinc, Zn\": 8,\n};\n\nexport const labels = {\n  \"Vitamin C, total ascorbic acid\": \"Vitamin C\",\n  \"Vitamin B-6\": \"Vitamin B6\",\n  \"Vitamin B-12\": \"Vitamin B12\",\n  \"Vitamin E (alpha-tocopherol)\": \"Vitamin E\",\n  \"Vitamin K (phylloquinone)\": \"Vitamin E\",\n  \"Calcium, Ca\": \"Calcium\",\n  \"Iron, Fe\": \"Iron\",\n  \"Magnesium, Mg\": \"Magnesium\",\n  \"Phosphorus, P\": \"Phosphorus\",\n  \"Potassium, K\": \"Potassium\",\n  \"Sodium, Na\": \"Sodium\",\n  \"Zinc, Zn\": \"Zinc\",\n};\n\nexport const getDatum = (report, key, factor, precision = 0) => {\n  const nutrient = getNutrient(report, key);\n  if (!nutrient) return null;\n  return `${round(Number(nutrient.value * factor), precision)} ${\n    nutrient.unit\n  }`;\n};\n\nexport const getReference = (key, report, factor, precision = 0) => {\n  const nutrient = getNutrient(report, key);\n  return referenceIntake[key] && nutrient\n    ? round(((nutrient.value * factor) / referenceIntake[key]) * 100, precision)\n    : undefined;\n};\n"],"sourceRoot":""}