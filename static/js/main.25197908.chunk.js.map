{"version":3,"sources":["actions.js","actionTypes.js","LinkButton.js","Search/SearchResultItem.js","Search/SearchResult.js","usda.js","Search/SearchBar.js","Logo.js","Search/SearchPage.js","Report/Breadcrumbs.js","Report/ProximatesChart.js","Report/Comparator.js","Report/Analysis.js","Report/Report.js","Report/Loading.js","Report/ReportPage.js","selectors.js","ErrorBoundary.js","Table/NutrientSelector.js","Table/TablePage.js","Table/CompareToaster.js","rootReducer.js","rootEpic.js","store.js","App.js","serviceWorker.js","index.js"],"names":["setQuery","query","type","payload","setDataSource","dataSource","search","getReport","ndbno","compareInsert","amount","fallbackName","LinkButton","styled","button","mapDispatchToProps","connect","item","className","css","to","name","onClick","partial","manu","ds","SearchResult","result","items","sortBy","list","q","start","end","Number","total","map","index","key","groupOrder","compareNutrients","a","b","indexOf","group","groupOrderNumber","nutrient","dataSourceIdentifierLookup","BOTH","STANDARD_REFERENCE","BRANDED_FOOD_PRODUCTS","dataSourceIdentifiers","Object","keys","decodeDataSourceIdentifier","identifier","getNutrient","food","find","nutrients","getNutrientValue","value","undefined","pivotNutrients","report","reduce","referenceIntake","Energy","Cholesterol","Protein","Riboflavin","Thiamin","Niacin","labels","getDatum","factor","precision","round","unit","getReference","SearchBar","props","stringifyState","searchQuery","searchDataSource","handleInputChange","event","target","push","handleDataSourceChange","bind","this","onChange","autoFocus","checked","Component","state","app","Logo","SearchPage","urlParams","URLSearchParams","window","location","has","get","searching","error","errors","style","color","message","searchResult","searchError","Breadcrumbs","fragments","split","fragment","pathname","slice","join","ProximatesChart","getValue","mass","totalFat","totalCarbs","protein","water","other","data01","saturatedFats","polySaturatedFats","monoSaturatedFats","otherFats","dietaryFiber","sugar","data02","colors","legend","entry","width","height","data","dataKey","cx","cy","innerRadius","outerRadius","fill","isAnimationActive","labelLine","label","midAngle","percent","sliceWideEnough","RADIAN","Math","PI","radius","x","cos","y","sin","Intl","NumberFormat","maximumFractionDigits","format","textAnchor","dominantBaseline","flatten","position","PureComponent","Comparator","bananas","calories","apples","bread","bubbleTeas","times","n","Analysis","Report","datum","reference","datumCell","main","referenceCell","tableRow","doubleTable","datumCells","referenceCells","datumCellChucks","chunk","referenceCellChucks","datumCellChunk","tableRows","nutrientGroups","groupBy","groupByNutrientGroup","sort","sortNutrientsByGroup","row","Loading","ReportPage","sliderPrecision","urlNDBNO","match","params","loaded","filter","e","minValue","maxValue","step","setMass","formatLabel","isUndefined","getReportResult","cachedReports","reports","cachedReportsIds","createSelector","ErrorBoundary","values","errorInfo","console","hasError","children","React","getInitialNutrientState","acc","selected","includes","NutrientSelector","setNutrients","useState","selectedNutrients","setSelectedNutrients","groups","useEffect","setAllInGroup","mapValues","set","toggleNutrient","groupNutrients","length","staticColumns","sortable","compact","selector","cell","desc","compareSet","compare","idsRaw","ids","cachedIds","pick","withRouter","useDeepCompareEffect","difference","forEach","id","useMemo","chain","flatMap","_","uniq","dynamicColumns","columns","setSort","sortedReports","direction","reverse","reportIndices","chartData","column","title","responsive","dense","onSort","strokeDasharray","SpaceBar","CompareToaster","compareClear","compareRemove","isVisible","isExpanded","setIsExpanded","display","initialState","appReducer","log","getReportNDBNO","gettingReport","getReportError","uniqBy","USDA_API_KEY","rootEpic","combineEpics","action$","state$","pipe","ofType","debounceTime","action","tap","mergeMap","ajax","getJSON","encodeURIComponent","dataSourceCode","response","searchFulfilled","catchError","of","xhr","foods","getReportFulfilled","epicMiddleware","createEpicMiddleware","history","createBrowserHistory","basename","process","App","path","exact","component","TablePage","Boolean","hostname","ReactDOM","render","store","preloadedState","createStore","combineReducers","router","connectRouter","compose","applyMiddleware","routerMiddleware","__REDUX_DEVTOOLS_EXTENSION__","run","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.25197908.chunk.js","sourcesContent":["import {\n  SEARCH,\n  SEARCH_FULFILLED,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_FULFILLED,\n  GET_REPORT_REJECTED,\n  SET_QUERY,\n  SET_DATA_SOURCE,\n  SET_MASS,\n  COMPARE_UPSERT,\n  COMPARE_REMOVE,\n  COMPARE_SET,\n  COMPARE_CLEAR,\n} from \"./actionTypes\";\n\nexport const setQuery = (query) => ({ type: SET_QUERY, payload: query });\nexport const setDataSource = (dataSource) => ({\n  type: SET_DATA_SOURCE,\n  payload: dataSource,\n});\nexport const search = () => ({ type: SEARCH });\nexport const searchFulfilled = (result) => ({\n  type: SEARCH_FULFILLED,\n  payload: result,\n});\nexport const searchRejected = (result) => ({\n  type: SEARCH_REJECTED,\n  payload: result,\n});\nexport const getReport = (ndbno) => ({ type: GET_REPORT, payload: ndbno });\nexport const getReportFulfilled = (result) => ({\n  type: GET_REPORT_FULFILLED,\n  payload: result,\n});\nexport const getReportRejected = (result) => ({\n  type: GET_REPORT_REJECTED,\n  payload: result,\n});\nexport const setMass = (mass) => ({ type: SET_MASS, payload: mass });\nexport const compareSet = (compare) => ({\n  type: COMPARE_SET,\n  payload: compare,\n});\nexport const compareInsert = (ndbno, amount, fallbackName) => ({\n  type: COMPARE_UPSERT,\n  payload: { ndbno, amount, fallbackName },\n});\nexport const compareUpdate = compareInsert;\nexport const compareRemove = (ndbno) => ({\n  type: COMPARE_REMOVE,\n  payload: ndbno,\n});\nexport const compareClear = () => ({\n  type: COMPARE_CLEAR,\n});\n","export const SET_QUERY = \"SET_QUERY\";\nexport const SET_DATA_SOURCE = \"SET_DATA_SOURCE\";\nexport const SEARCH = \"SEARCH\";\nexport const SEARCH_FULFILLED = \"SEARCH_FULFILLED\";\nexport const SEARCH_REJECTED = \"SEARCH_REJECTED\";\nexport const GET_REPORT = \"GET_REPORT\";\nexport const GET_REPORT_FULFILLED = \"GET_REPORT_FULFILLED\";\nexport const GET_REPORT_REJECTED = \"GET_REPORT_REJECTED\";\nexport const SET_MASS = \"SET_MASS\";\nexport const COMPARE_SET = \"COMPARE_SET\";\nexport const COMPARE_UPSERT = \"COMPARE_UPSERT\";\nexport const COMPARE_REMOVE = \"COMPARE_REMOVE\";\nexport const COMPARE_CLEAR = \"COMPARE_CLEAR\";\n","import styled from \"@emotion/styled\";\n\nexport const LinkButton = styled.button`\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  display: inline;\n  margin: 0;\n  padding: 0;\n  color: #5e5e5e;\n\n  &:hover {\n    color: #f06292;\n  }\n`;\n\nexport default LinkButton;\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport { partial } from \"lodash\";\n\nimport { compareInsert } from \"../actions\";\nimport { css } from \"emotion\";\nimport LinkButton from \"../LinkButton\";\n\nexport const SearchResultItem = ({ item, compareInsert }) => {\n  return (\n    <div className=\"SearchResultItem\">\n      <div\n        className={css`\n          display: flex;\n          flex-direction: row;\n          align-items: baseline;\n\n          button {\n            visibility: hidden;\n          }\n          :hover {\n            button {\n              visibility: visible;\n            }\n          }\n        `}\n      >\n        <Link to={`/report/${item.ndbno}`}>\n          <h3\n            className={css`\n              margin-right: 1rem;\n            `}\n          >\n            {item.name}\n          </h3>\n        </Link>\n        <LinkButton\n          onClick={partial(compareInsert, item.ndbno, 100, item.name)}\n        >\n          Compare\n        </LinkButton>\n      </div>\n      <div className=\"SearchResultItem-meta\">\n        <span className=\"SearchResultItem-metaDescriptor\">\n          <strong>ndbno: </strong>\n          {item.ndbno}\n        </span>\n        <span className=\"SearchResultItem-metaDescriptor\">\n          <strong>Manufacturer: </strong>\n          {item.manu}\n        </span>\n        <span className=\"SearchResultItem-metaDescriptor\">\n          <strong>Data Source: </strong>\n          {item.ds}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nconst mapDispatchToProps = {\n  compareInsert,\n};\n\nexport default connect(null, mapDispatchToProps)(SearchResultItem);\n","import React from \"react\";\nimport { sortBy } from \"lodash\";\n\nimport SearchResultItem from \"./SearchResultItem\";\n\nexport const SearchResult = ({ result }) => {\n  const items = sortBy(result.list.item, \"name\");\n  const query = result.list.q;\n  const ds = result.list.ds;\n  const start = result.list.start + 1;\n  const end = Number(result.list.end);\n  const total = result.list.total;\n\n  return (\n    <div className=\"SearchResult\">\n      <div className=\"descriptor\">\n        Result for \"{query}\" in \"{ds}\" ({start} to {end} of {total}):\n      </div>\n      <ul>\n        {items.map((item, index) => (\n          <li key={index}>\n            <SearchResultItem item={item}></SearchResultItem>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default SearchResult;\n","import { groupBy, find, round } from \"lodash\";\n\nexport const groupOrder = [\n  \"Proximates\",\n  \"Lipids\",\n  \"Vitamins\",\n  \"Minerals\",\n  \"Other\",\n];\n\nexport const sortNutrientsByGroup = (nutrients) => {\n  return nutrients.sort(compareNutrients);\n};\n\nexport const compareNutrients = (a, b) => {\n  return groupOrder.indexOf(a.group) - groupOrder.indexOf(b.group);\n};\n\nexport const groupOrderNumber = (nutrient) => {\n  return groupOrder.indexOf(nutrient.group);\n};\n\nexport const groupByNutrientGroup = (nutrients) => groupBy(nutrients, \"group\");\n\nexport const dataSourceIdentifierLookup = {\n  BOTH: \"Any\",\n  STANDARD_REFERENCE: \"Standard Reference\",\n  BRANDED_FOOD_PRODUCTS: \"Branded Food Products\",\n};\n\nexport const dataSourceIdentifiers = Object.keys(dataSourceIdentifierLookup);\n\nexport const decodeDataSourceIdentifier = (identifier) =>\n  dataSourceIdentifierLookup[identifier];\n\nexport const getNutrient = (food, name) => find(food.nutrients, { name });\n\nexport const getNutrientValue = (food, name) =>\n  Number(getNutrient(food, name) ? getNutrient(food, name).value : undefined);\n\nexport const pivotNutrients = (report) => ({\n  ...report,\n  nutrients: report.nutrients.reduce(\n    (nutrients, nutrient) => ({ ...nutrients, [nutrient.name]: nutrient }),\n    {}\n  ),\n});\n\nexport const referenceIntake = {\n  Energy: 2000,\n  \"Total lipid (fat)\": 67,\n  \"Fatty acids, total saturated\": 20,\n  Cholesterol: 300,\n  \"Carbohydrate, by difference\": 300,\n  \"Fiber, total dietary\": 25,\n  Protein: 50,\n  \"Vitamin C, total ascorbic acid\": 60,\n  \"Vitamin B-6\": 1.2,\n  \"Vitamin B-12\": 6,\n  \"Vitamin E (alpha-tocopherol)\": 15,\n  \"Vitamin K (phylloquinone)\": 120,\n  Riboflavin: 1.1,\n  Thiamin: 1.1,\n  Niacin: 14,\n  \"Folate, DFE\": 400,\n  \"Vitamin A, RAE\": 600,\n  \"Vitamin D\": 800,\n  \"Vitamin D (D2 + D3)\": 20,\n  \"Calcium, Ca\": 1000,\n  \"Iron, Fe\": 19,\n  \"Magnesium, Mg\": 420,\n  \"Phosphorus, P\": 700,\n  \"Sodium, Na\": 2400,\n  \"Potassium, K\": 3533,\n  \"Zinc, Zn\": 8,\n};\n\nexport const labels = {\n  \"Vitamin C, total ascorbic acid\": \"Vitamin C\",\n  \"Vitamin B-6\": \"Vitamin B6\",\n  \"Vitamin B-12\": \"Vitamin B12\",\n  \"Vitamin E (alpha-tocopherol)\": \"Vitamin E\",\n  \"Vitamin K (phylloquinone)\": \"Vitamin E\",\n  \"Calcium, Ca\": \"Calcium\",\n  \"Iron, Fe\": \"Iron\",\n  \"Magnesium, Mg\": \"Magnesium\",\n  \"Phosphorus, P\": \"Phosphorus\",\n  \"Potassium, K\": \"Potassium\",\n  \"Sodium, Na\": \"Sodium\",\n  \"Zinc, Zn\": \"Zinc\",\n};\n\nexport const getDatum = (report, key, factor, precision = 0) => {\n  const nutrient = getNutrient(report, key);\n  if (!nutrient) return null;\n  return `${round(Number(nutrient.value * factor), precision)} ${\n    nutrient.unit\n  }`;\n};\n\nexport const getReference = (key, report, factor, precision = 0) => {\n  return referenceIntake[key]\n    ? round(\n        ((getNutrient(report, key).value * factor) / referenceIntake[key]) *\n          100,\n        precision\n      )\n    : null;\n};\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setQuery, setDataSource, search } from \"../actions\";\nimport { dataSourceIdentifiers, decodeDataSourceIdentifier } from \"../usda\";\nimport { push } from \"connected-react-router\";\n\nclass SearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleDataSourceChange = this.handleDataSourceChange.bind(this);\n  }\n\n  stringifyState = (\n    query = this.props.searchQuery,\n    dataSource = this.props.searchDataSource\n  ) => {\n    return `?query=${query}&dataSource=${dataSource}`;\n  };\n\n  handleInputChange = (event) => {\n    this.props.setQuery(event.target.value);\n    this.props.push(this.stringifyState(event.target.value));\n    if (this.props.searchQuery) this.props.search();\n  };\n\n  handleDataSourceChange = (event) => {\n    this.props.setDataSource(event.target.value);\n    this.props.push(this.stringifyState(undefined, event.target.value));\n    if (this.props.searchQuery) this.props.search();\n  };\n\n  render() {\n    return (\n      <div className=\"SearchBar\">\n        <label>\n          <input\n            type=\"text\"\n            className=\"queryInput\"\n            value={this.props.searchQuery}\n            onChange={this.handleInputChange}\n            autoFocus\n          />\n        </label>\n        <br />\n        Data Source:&nbsp;\n        {dataSourceIdentifiers.map((identifier) => (\n          <label className=\"dataSourceInputLabel\" key={identifier}>\n            <input\n              type=\"radio\"\n              className=\"dataSourceInput\"\n              value={identifier}\n              checked={this.props.searchDataSource === identifier}\n              onChange={this.handleDataSourceChange}\n            ></input>\n            {decodeDataSourceIdentifier(identifier)}\n          </label>\n        ))}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  searchQuery: state.app.searchQuery,\n  searchDataSource: state.app.searchDataSource,\n});\n\nconst mapDispatchToProps = {\n  setQuery,\n  setDataSource,\n  search,\n  push,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass Logo extends Component {\n  render() {\n    return (\n      <div className=\"Logo\">\n        <Link to=\"/search\">\n          <h1>USDA</h1>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default Logo;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport SearchResult from \"./SearchResult\";\nimport SearchBar from \"./SearchBar\";\nimport { setQuery, setDataSource, search } from \"../actions\";\nimport Logo from \"../Logo\";\nimport { decodeDataSourceIdentifier } from \"../usda\";\n\nclass SearchPage extends Component {\n  constructor(props) {\n    super(props);\n    let urlParams = new URLSearchParams(window.location.search);\n    if (\n      urlParams.has(\"dataSource\") &&\n      urlParams.get(\"dataSource\") !== this.props.dataSource\n    ) {\n      this.props.setDataSource(urlParams.get(\"dataSource\"));\n    }\n    if (urlParams.has(\"query\")) {\n      if (urlParams.get(\"query\") !== this.props.query) {\n        this.props.setQuery(urlParams.get(\"query\"));\n        this.props.search();\n      }\n    } else {\n      this.props.setQuery(\"\");\n    }\n  }\n\n  render() {\n    let result = this.props.searching ? (\n      <span>\n        Searching for \"{this.props.query}\" in{\" \"}\n        {decodeDataSourceIdentifier(this.props.dataSource)}...\n      </span>\n    ) : this.props.error ? (\n      this.props.error.errors.error.map((error, index) => (\n        <div key={index} style={{ color: \"red\" }}>\n          {error.message}\n        </div>\n      ))\n    ) : this.props.result ? (\n      <SearchResult result={this.props.result} />\n    ) : null;\n\n    return (\n      <div className=\"SearchPage\">\n        <div className=\"header\">\n          <Logo />\n          <SearchBar />\n        </div>\n        <hr />\n        <div className=\"ResultContainer\">{result}</div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  searching: state.app.searching,\n  query: state.app.searchQuery,\n  dataSource: state.app.searchDataSource,\n  result: state.app.searchResult,\n  // items: get(state.app.searchResult, 'list.item'),\n  error: state.app.searchError,\n});\n\nconst mapDispatchToProps = {\n  setQuery,\n  setDataSource,\n  search,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPage);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nclass Breadcrumbs extends Component {\n  render() {\n    let fragments = this.props.name.split(\", \");\n    return (\n      <div className=\"Breadcrumbs\">\n        {fragments.map((fragment, index, fragments) => (\n          <span key={index}>\n            &nbsp;/&nbsp;\n            <Link\n              to={{\n                pathname: \"/search\",\n                search: `?query=${fragments\n                  .slice(0, index + 1)\n                  .join(\", \")}&dataSource=${this.props.dataSource}`,\n              }}\n              className=\"Breadcrumbs-item\"\n            >\n              {fragment}\n            </Link>\n          </span>\n        ))}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  dataSource: state.app.searchDataSource,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Breadcrumbs);\n","import React, { PureComponent } from \"react\";\nimport { PieChart, Pie, Cell, Label, Legend } from \"recharts\";\nimport { getNutrientValue } from \"../usda\";\nimport { flatten } from \"lodash\";\n\nexport default class ProximatesChart extends PureComponent {\n  getValue = (key) =>\n    (getNutrientValue(this.props.report, key) * this.props.mass) / 100;\n\n  render() {\n    let totalFat = this.getValue(\"Total lipid (fat)\");\n    let totalCarbs = this.getValue(\"Carbohydrate, by difference\");\n    let protein = this.getValue(\"Protein\");\n    let water = this.getValue(\"Water\");\n    let other = this.props.mass - (totalFat + totalCarbs + protein + water);\n\n    const data01 = [\n      { name: \"Total Fat\", value: totalFat },\n      { name: \"Total Carbs\", value: totalCarbs },\n      { name: \"Protein\", value: protein },\n      { name: \"Water\", value: water },\n      { name: \"Other\", value: other },\n    ];\n\n    let saturatedFats = this.getValue(\"Fatty acids, total saturated\");\n    let polySaturatedFats = this.getValue(\"Fatty acids, total polyunsaturated\");\n    let monoSaturatedFats = this.getValue(\"Fatty acids, total monounsaturated\");\n    let otherFats =\n      totalFat - saturatedFats - polySaturatedFats - monoSaturatedFats;\n\n    let dietaryFiber = this.getValue(\"Fiber, total dietary\");\n    let sugar = this.getValue(\"Sugars, total\");\n    let otherCarbs = totalCarbs - dietaryFiber - sugar;\n\n    const data02 = [\n      { name: \"Polyunsat. Fat\", value: polySaturatedFats },\n      { name: \"Monounsat. Fat\", value: monoSaturatedFats },\n      { name: \"Saturated Fat\", value: saturatedFats },\n      { name: \"Other Fats\", value: otherFats },\n      { name: \"Dietary Fiber\", value: dietaryFiber },\n      { name: \"Sugar\", value: sugar },\n      { name: \"Other Carbs\", value: otherCarbs },\n      { name: \"Protein\", value: protein },\n      { name: \"Water\", value: water },\n      { name: \"Other\", value: other },\n    ];\n\n    let sliceWideEnough = (props) => {\n      return props.percent > 0.03;\n    };\n\n    let label = (props) => {\n      let {\n        cx,\n        cy,\n        midAngle,\n        innerRadius,\n        outerRadius,\n        value,\n        index,\n        fill,\n      } = props;\n\n      if (!sliceWideEnough(props)) return null;\n\n      const RADIAN = Math.PI / 180;\n      const radius = 10 + innerRadius + (outerRadius - innerRadius);\n      const x = cx + radius * Math.cos(-midAngle * RADIAN);\n      const y = cy + radius * Math.sin(-midAngle * RADIAN);\n      value = new Intl.NumberFormat(\"en-IN\", {\n        maximumFractionDigits: 1,\n      }).format(value);\n\n      return (\n        <text\n          x={x}\n          y={y}\n          fill={fill}\n          textAnchor={x > cx ? \"start\" : \"end\"}\n          dominantBaseline=\"central\"\n        >\n          {data02[index].name} {value} g\n        </text>\n      );\n    };\n\n    let colors = [\n      [\"#ffeb3b\", \"#fdd835\", \"#fbc02d\", \"#f9a825\"],\n      [\"#aed581\", \"#8bc34a\", \"#689f38\"],\n      [\"#f06292\"],\n      [\"#2196f3\"],\n      [\"#e0e0e0\"],\n    ];\n\n    let legend = data01.map((entry, index) => ({\n      value: entry.name,\n      color: colors[index][0],\n    }));\n\n    return (\n      <PieChart width={500} height={275}>\n        <Pie\n          data={data01}\n          dataKey=\"value\"\n          cx={250}\n          cy={125}\n          innerRadius={30}\n          outerRadius={60}\n          fill=\"#8884d8\"\n          isAnimationActive={false}\n        >\n          {data01.map((entry, index) => (\n            <Cell key={index} fill={colors[index][0]} />\n          ))}\n        </Pie>\n        <Pie\n          data={data02}\n          dataKey=\"value\"\n          cx={250}\n          cy={125}\n          innerRadius={70}\n          outerRadius={90}\n          fill=\"red\"\n          labelLine={false}\n          label={label}\n          isAnimationActive={false}\n        >\n          {data02.map((entry, index) => (\n            <Cell key={`index`} fill={flatten(colors)[index]} />\n          ))}\n          <Label value={`${this.props.mass} g`} position=\"center\" />\n        </Pie>\n        <Legend payload={legend} />\n      </PieChart>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { times } from \"lodash\";\n\nconst BANANA_FACTOR = 105;\nconst APPLE_FACTOR = 95;\nconst BREAD_FACTOR = 67;\nconst BUBBLE_TEA_FACTOR = 350;\n\nclass Comparator extends Component {\n  render() {\n    let bananas = Math.round(this.props.calories / BANANA_FACTOR);\n    let apples = Math.round(this.props.calories / APPLE_FACTOR);\n    let bread = Math.round(this.props.calories / BREAD_FACTOR);\n    let bubbleTeas = Math.round(this.props.calories / BUBBLE_TEA_FACTOR);\n\n    return (\n      <div className=\"Comparator\">\n        <div className=\"Comparator-header\">\n          <h2>{this.props.calories} kcal</h2>\n          <br />\n          equal\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(bubbleTeas, (n) => \"üçπ\")}\n          <br />\n          {bubbleTeas} Cups of Bubble Tea\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(bananas, (n) => \"üçå\")}\n          <br />\n          {bananas} Medium Bananas (118g)\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(apples, (n) => \"üçé\")}\n          <br />\n          {apples} Apples (182g)\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(bread, (n) => \"üçû\")}\n          <br />\n          {bread} Slices of White Bread (28g)\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Comparator;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport ProximatesChart from \"./ProximatesChart\";\nimport Comparator from \"./Comparator\";\n\nclass Analysis extends Component {\n  render() {\n    let calories =\n      (this.props.report.nutrients.find(\n        (nutrient) => nutrient.name === \"Energy\"\n      ).value *\n        this.props.mass) /\n      100;\n\n    return (\n      <div className=\"Analysis\">\n        <ProximatesChart report={this.props.report} mass={this.props.mass} />\n        <Comparator calories={calories} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  mass: state.app.mass,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Analysis);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  sortNutrientsByGroup,\n  groupByNutrientGroup,\n  getNutrient,\n  labels,\n  getDatum,\n  getReference,\n} from \"../usda\";\nimport { chunk } from \"lodash\";\n\nclass Report extends Component {\n  datum = (key, precision) =>\n    getDatum(this.props.report, key, this.props.factor, precision);\n\n  reference = (key) =>\n    `${getReference(key, this.props.report, this.props.factor)}%`;\n\n  datumCell = (key, label = key, main) => (\n    <td className={`nutTable-left ${!main && \"indent-2\"}`}>\n      {main ? <strong>{label} </strong> : label + \" \"}\n      {this.datum(key)}\n    </td>\n  );\n  referenceCell = (key) => (\n    <td className=\"nutTable-right\">{this.reference(key)}</td>\n  );\n\n  tableRow = (index, key, label = key, main = false) => {\n    if (getNutrient(this.props.report, key)) {\n      return (\n        <tr key={index}>\n          {this.datumCell(key, label, main)}\n          {this.referenceCell(key)}\n        </tr>\n      );\n    } else {\n      return null;\n    }\n  };\n\n  doubleTable = (nutrients) => {\n    let datumCells = nutrients.map((nutrient) =>\n      this.datumCell(nutrient.name, labels[nutrient.name], true)\n    );\n    let referenceCells = nutrients.map((nutrient) =>\n      this.referenceCell(nutrient.name)\n    );\n\n    let datumCellChucks = chunk(datumCells, 2);\n    let referenceCellChucks = chunk(referenceCells, 2);\n\n    return (\n      <table className=\"nutTable\">\n        <tbody>\n          {datumCellChucks.map((datumCellChunk, index) => (\n            <tr key={index}>\n              {datumCellChucks[index][0]}\n              {referenceCellChucks[index][0]}\n              {datumCellChucks[index][1] || <td className=\"nutTable-left\"></td>}\n              {referenceCellChucks[index][1] || (\n                <td className=\"nutTable-right\"></td>\n              )}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    );\n  };\n\n  tableRows = [\n    { label: \"Calories\", key: \"Energy\", main: true },\n    { label: \"Total Fat\", key: \"Total lipid (fat)\", main: true },\n    {\n      label: \"Saturated fat\",\n      key: \"Fatty acids, total saturated\",\n      main: false,\n    },\n    {\n      label: \"Polyunsaturated fat\",\n      key: \"Fatty acids, total polyunsaturated\",\n      main: false,\n    },\n    {\n      label: \"Monounsaturated fat\",\n      key: \"Fatty acids, total monounsaturated\",\n      main: false,\n    },\n    { label: \"Water\", key: \"Water\", main: true },\n    { label: \"Cholesterol\", key: \"Cholesterol\", main: true },\n    { label: \"Sodium\", key: \"Sodium, Na\", main: true },\n    { label: \"Potassium\", key: \"Potassium, K\", main: true },\n    {\n      label: \"Total Carbohydrate\",\n      key: \"Carbohydrate, by difference\",\n      main: true,\n    },\n    { label: \"Dietary fiber\", key: \"Fiber, total dietary\", main: false },\n    { label: \"Sugar\", key: \"Sugars, total\", main: false },\n    { label: \"Protein\", key: \"Protein\", main: true },\n  ];\n\n  render() {\n    let nutrients = sortNutrientsByGroup(this.props.report.nutrients);\n    let nutrientGroups = groupByNutrientGroup(nutrients);\n\n    return (\n      <div className=\"Report\">\n        <table className=\"nutTable\">\n          <tbody>\n            {this.tableRows.map((row, index) =>\n              this.tableRow(index, row.key, row.label, row.main)\n            )}\n          </tbody>\n        </table>\n        {nutrientGroups[\"Vitamins\"] &&\n          this.doubleTable(nutrientGroups[\"Vitamins\"])}\n        {nutrientGroups[\"Minerals\"] &&\n          this.doubleTable(nutrientGroups[\"Minerals\"])}\n        {nutrientGroups[\"Other\"] && this.doubleTable(nutrientGroups[\"Other\"])}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  mass: state.app.mass,\n  factor: state.app.mass / 100,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Report);\n","import React from \"react\";\nimport { css } from \"emotion\";\n\nconst Loading = (props) => {\n  return (\n    <div\n      className={css`\n        margin-top: 2rem;\n        margin-left: 2rem;\n        border: 8px solid #f06292;\n        border-top: 8px solid transparent; /* Blue */\n        border-radius: 50%;\n        width: 80px;\n        height: 80px;\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      `}\n    >\n      Loading\n    </div>\n  );\n};\n\nexport default Loading;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport InputRange from \"react-input-range\";\nimport \"react-input-range/lib/css/index.css\";\nimport { get, isUndefined } from \"lodash\";\n\nimport Breadcrumbs from \"./Breadcrumbs\";\nimport Analysis from \"./Analysis\";\nimport Report from \"./Report\";\nimport Loading from \"./Loading\";\n\nimport { getReport, setMass, compareInsert } from \"../actions\";\n\nclass ReportPage extends Component {\n  constructor(props) {\n    super(props);\n    this.urlNDBNO = this.props.match.params.ndbno;\n    this.props.getReport(this.urlNDBNO);\n  }\n\n  sliderPrecision = (mass) => {\n    if (mass < 25) return 1;\n    if (mass < 100) return 5;\n    if (mass < 500) return 10;\n    return 50;\n  };\n\n  render() {\n    const { compareInsert, ndbno, mass } = this.props;\n    return (\n      <div className=\"ReportPage\">\n        <div className=\"header\">\n          <div>\n            <h1>\n              {this.props.loaded\n                ? `${this.props.name}`\n                : `Loading report for ndbno ${this.urlNDBNO}`}\n              <button onClick={() => compareInsert(ndbno, mass)}>\n                Compare\n              </button>\n            </h1>\n            <div className=\"descriptor\">\n              {this.props.loaded && (\n                <small>\n                  {[this.props.ds, this.props.manu, this.props.ndbno]\n                    .filter((e) => e)\n                    .join(\" ¬∑ \")}\n                </small>\n              )}\n            </div>\n            {this.props.loaded && <Breadcrumbs name={this.props.name} />}\n            <Link to=\"/search/\" className=\"newSearchLink\">\n              &#8592; New Search\n            </Link>\n            <InputRange\n              className=\"massInput\"\n              minValue={0}\n              maxValue={1000}\n              step={this.sliderPrecision(this.props.mass)}\n              value={this.props.mass}\n              onChange={this.props.setMass}\n              formatLabel={(value) => `Mass ${value} g`}\n            />\n          </div>\n        </div>\n        {this.props.loaded ? (\n          <div className=\"ReportPage-container\">\n            <div className=\"ReportPage-report\">\n              <Report report={this.props.report} />\n            </div>\n            <div className=\"ReportPage-analysis\">\n              <Analysis report={this.props.report} />\n            </div>\n          </div>\n        ) : (\n          <Loading />\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  loaded: !isUndefined(state.app.getReportResult),\n  report: state.app.getReportResult,\n  name: get(state.app.getReportResult, \"desc.name\"),\n  ds: get(state.app.getReportResult, \"desc.ds\"),\n  manu: get(state.app.getReportResult, \"desc.manu\"),\n  ndbno: get(state.app.getReportResult, \"desc.ndbno\"),\n  mass: state.app.mass,\n});\n\nconst mapDispatchToProps = {\n  getReport,\n  setMass,\n  compareInsert,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReportPage);\n","import { createSelector } from \"reselect\";\n\nexport const cachedReports = (state) => state.app.reports;\nexport const cachedReportsIds = createSelector([cachedReports], Object.keys);\nexport const cachedReportsAsArray = createSelector(\n  [cachedReports],\n  Object.values\n);\n","import React from \"react\";\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: null };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { error };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error(error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <code>error in subtree</code>;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import React, { useState, useEffect } from \"react\";\nimport { css } from \"emotion\";\n\nimport { groupBy, map, mapValues, set, partial } from \"lodash\";\n\nimport LinkButton from \"../LinkButton\";\n\nconst getInitialNutrientState = (nutrients) =>\n  nutrients.reduce(\n    (acc, n) => ({\n      ...acc,\n      [n.name]: { selected: [\"Proximates\"].includes(n.group), ...n },\n    }),\n    {}\n  );\n\nconst NutrientSelector = ({ nutrients, setNutrients, className, ...props }) => {\n  const [selectedNutrients, setSelectedNutrients] = useState(\n    getInitialNutrientState(nutrients)\n  );\n\n  const groups = groupBy(Object.values(selectedNutrients), \"group\");\n\n  useEffect(() => {\n    setSelectedNutrients((selectedNutrients) => ({\n      ...getInitialNutrientState(nutrients),\n      ...selectedNutrients,\n    }));\n  }, [nutrients]);\n\n  useEffect(() => {\n    setNutrients(Object.values(selectedNutrients));\n  }, [selectedNutrients, setNutrients]);\n\n  const setAllInGroup = (group, checked) => {\n    setSelectedNutrients(\n      mapValues(selectedNutrients, (nutrient) =>\n        nutrient.group === group ? set(nutrient, \"selected\", checked) : nutrient\n      )\n    );\n  };\n\n  const toggleNutrient = (name) =>\n    setSelectedNutrients((selectedNutrients) => ({\n      ...selectedNutrients,\n      [name]: {\n        ...selectedNutrients[name],\n        selected: !selectedNutrients[name].selected,\n      },\n    }));\n\n  return (\n    <div\n      className={\n        css`\n          display: flex;\n          flex-direction: row;\n        ` + ` ${className}`\n      }\n      {...props}\n    >\n      {map(groups, (groupNutrients, group) => (\n        <div\n          key={group}\n          className={css`\n            display: flex;\n            flex-direction: column;\n            margin-right: 1rem;\n            min-width: 200px;\n          `}\n        >\n          <h4>{group}</h4>\n          <hr />\n          {map(groupNutrients, ({ name }) => (\n            <label key={name}>\n              <input\n                type=\"checkbox\"\n                name={name}\n                checked={\n                  selectedNutrients[name] && selectedNutrients[name].selected\n                }\n                onChange={partial(toggleNutrient, name)}\n              />\n              {name}\n            </label>\n          ))}\n          {groupNutrients.length > 1 && (\n            <div\n              className={css`\n                margin-top: 1rem;\n              `}\n            >\n              <LinkButton onClick={partial(setAllInGroup, group, true)}>\n                Select All\n              </LinkButton>{\" \"}\n              &middot;{\" \"}\n              <LinkButton onClick={partial(setAllInGroup, group, false)}>\n                Select None\n              </LinkButton>\n            </div>\n          )}\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default NutrientSelector;\n","import React, { useMemo, useState } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport useDeepCompareEffect from \"use-deep-compare-effect\";\nimport { css } from \"emotion\";\nimport { withRouter, Link } from \"react-router-dom\";\n\nimport {\n  reduce,\n  get,\n  difference,\n  pick,\n  chain,\n  partial,\n  sortBy,\n  indexOf,\n  default as _,\n} from \"lodash\";\n\nimport DataTable from \"react-data-table-component\";\n\nimport { getReport, compareSet } from \"../actions\";\nimport { cachedReportsIds, cachedReports } from \"../selectors\";\nimport {\n  pivotNutrients,\n  groupOrderNumber,\n  getDatum,\n  getReference,\n} from \"../usda\";\nimport ErrorBoundary from \"../ErrorBoundary\";\nimport Logo from \"../Logo\";\nimport NutrientSelector from \"./NutrientSelector\";\nimport {\n  BarChart,\n  CartesianGrid,\n  XAxis,\n  YAxis,\n  Tooltip,\n  Legend,\n  Bar,\n  ResponsiveContainer,\n} from \"recharts\";\n\nconst colors = [\n  \"#f44336\",\n  \"#e91e63\",\n  \"#673ab7\",\n  \"#3f51b5\",\n  \"#2196f3\",\n  \"#03a9f4\",\n  \"#00bcd4\",\n  \"#009688\",\n];\n\nconst staticColumns = [\n  {\n    name: \"Name\",\n    sortable: true,\n    compact: true,\n    selector: (row) => get(row, \"desc.name\"),\n    cell: (row) => (\n      <Link to={`/report/${row.desc.ndbno}`}>{row.desc.name}</Link>\n    ),\n  },\n  // {\n  //   name: \"ndbno\",\n  //   selector: \"desc.ndbno\",\n  //   sortable: true,\n  //   compact: true,\n  // },\n];\n\nexport const TablePage = ({\n  ids,\n  cachedIds,\n  reports,\n  getReport,\n  compareSet,\n}) => {\n  useDeepCompareEffect(() => {\n    const idsToGet = difference(ids, cachedIds);\n    idsToGet.forEach(getReport);\n  }, [ids, cachedIds, getReport]);\n  useDeepCompareEffect(() => {\n    compareSet(ids.map((id) => ({ ndbno: id, amount: 100 })));\n  }, [ids, compareSet]);\n\n  const nutrients = useMemo(() => {\n    return chain(reports)\n      .map(\"nutrients\")\n      .flatMap(Object.values)\n      .sortBy(groupOrderNumber)\n      .map(partial(pick, _, [\"name\", \"group\"]))\n      .uniq()\n      .value();\n  }, [reports]);\n\n  const [selectedNutrients, setSelectedNutrients] = useState(null);\n\n  const dynamicColumns = chain(selectedNutrients)\n    .filter(\"selected\")\n    .map((nutrient) => ({\n      name: nutrient.name,\n      selector: (row) =>\n        Number(get(row, [\"nutrients\", nutrient.name, \"value\"])),\n      format: (row) => getDatum(row, nutrient.name, 1, 2),\n      sortable: true,\n      compact: true,\n    }))\n    .value();\n\n  const columns = [...staticColumns, ...dynamicColumns];\n\n  const [sort, setSort] = useState();\n\n  let sortedReports = sort ? sortBy(reports, sort.selector) : reports;\n  if (sort && sort.direction !== \"asc\") {\n    sortedReports = sortedReports.reverse();\n  }\n  const reportIndices = reports.reduce(\n    (acc, report) => ({\n      ...acc,\n      [report.desc.ndbno]: indexOf(sortedReports, report),\n    }),\n    {}\n  );\n\n  const chartData = chain(dynamicColumns)\n    .map((column) => ({\n      name: column.name,\n      ...reduce(\n        reports,\n        (acc, report) => ({\n          ...acc,\n          [reportIndices[report.desc.ndbno]]: getReference(\n            column.name,\n            report,\n            1,\n            2\n          ),\n        }),\n        {}\n      ),\n    }))\n    .value();\n\n  return (\n    <div\n      className={css`\n        padding: 2rem 1rem;\n      `}\n    >\n      <Logo />\n      <NutrientSelector\n        nutrients={nutrients}\n        setNutrients={setSelectedNutrients}\n        className={css`\n          margin-top: 2rem;\n        `}\n      />\n      <ErrorBoundary>\n        <DataTable\n          columns={columns}\n          data={reports}\n          title=\"Reports\"\n          responsive\n          dense\n          onSort={(sort, direction) => setSort({ ...sort, direction })}\n        />\n      </ErrorBoundary>\n      <ResponsiveContainer\n        width=\"100%\"\n        height={300}\n        className={css`\n          margin-top: 2rem;\n        `}\n      >\n        <BarChart data={chartData}>\n          <CartesianGrid strokeDasharray=\"3 3\" />\n          <XAxis dataKey=\"name\" />\n          <YAxis />\n          <Tooltip />\n          <Legend />\n          {sortedReports.map((report, index) => (\n            <Bar\n              key={index}\n              dataKey={index}\n              name={sortedReports[index].desc.name}\n              fill={colors[reports.indexOf(report) % colors.length]}\n            />\n          ))}\n        </BarChart>\n      </ResponsiveContainer>\n    </div>\n  );\n};\n\nTablePage.propTypes = {\n  ids: PropTypes.arrayOf(PropTypes.string),\n  cachedIds: PropTypes.arrayOf(PropTypes.string),\n  reports: PropTypes.arrayOf(PropTypes.object),\n  getReport: PropTypes.func,\n};\n\nconst mapStateToProps = (state) => {\n  const idsRaw = new URLSearchParams(\n    get(state, \"router.location.search\", \"\")\n  ).get(\"ids\");\n  const ids = idsRaw ? idsRaw.split(\",\") : [];\n  return {\n    cachedIds: cachedReportsIds(state),\n    ids,\n    reports: Object.values(pick(cachedReports(state), ids)).map(pivotNutrients),\n  };\n};\n\nconst mapDispatchToProps = {\n  getReport,\n  compareSet,\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(withRouter(TablePage));\n","import React, { useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { css } from \"emotion\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { map } from \"lodash\";\n\nimport { compareClear, compareRemove } from \"../actions\";\n\nconst SpaceBar = (props) => (\n  <div\n    className={css`\n      display: flex;\n      justify-content: space-between;\n      padding: 0.5rem;\n    `}\n    {...props}\n  />\n);\n\nexport const CompareToaster = withRouter(\n  ({ compare, compareClear, compareRemove, location }) => {\n    const isVisible = compare.length > 0 && location.pathname !== \"/compare\";\n    const [isExpanded, setIsExpanded] = useState(true);\n    const ids = map(compare, \"ndbno\").join(\",\");\n    return (\n      <div\n        className={css`\n          display: ${isVisible ? \"initial\" : \"none\"};\n          position: fixed;\n          bottom: 0;\n          right: 5rem;\n          border: 1px solid black;\n          border-bottom: none;\n          background-color: white;\n          min-width: 300px;\n        `}\n      >\n        <div\n          className={css`\n            display: flex;\n            justify-content: space-between;\n            background-color: #eaeaea;\n            padding: 0.5rem;\n          `}\n          onClick={() => setIsExpanded(!isExpanded)}\n        >\n          <h3\n            className={css`\n              margin: 0;\n            `}\n          >\n            Collection <small>({compare.length})</small>\n          </h3>\n          {isExpanded ? \" üîº\" : \" üîΩ\"}\n        </div>\n        <table\n          className={css`\n            display: ${isExpanded ? \"visible\" : \"none\"};\n            margin: 0;\n            margin-top: 0.5rem;\n            padding: 0.5rem;\n          `}\n        >\n          <tbody>\n            {compare.map((item) => (\n              <tr key={item.ndbno}>\n                <td\n                  className={css`\n                    max-width: 200px;\n                    text-overflow: ellipsis;\n                    overflow: hidden;\n                    white-space: nowrap;\n                  `}\n                  title={item.report ? item.report.desc.name : item.ndbno}\n                >\n                  {item.report ? item.report.desc.name : item.fallbackName}\n                </td>\n                <td>{item.amount} g</td>\n                <td>\n                  <button onClick={() => compareRemove(item.ndbno)}>X</button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n        <SpaceBar\n          style={{\n            display: isExpanded ? \"flex\" : \"none\",\n          }}\n        >\n          <button onClick={compareClear}>Clear Collection</button>\n          <Link to={`/compare?ids=${ids}`}>Go to Collection</Link>\n        </SpaceBar>\n      </div>\n    );\n  }\n);\n\nconst mapStateToProps = (state) => ({\n  compare: state.app.compare.map((item) => ({\n    ...item,\n    report: state.app.reports[item.ndbno],\n  })),\n});\n\nconst mapDispatchToProps = {\n  compareClear,\n  compareRemove,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CompareToaster);\n","import {\n  SEARCH,\n  SEARCH_FULFILLED,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_FULFILLED,\n  GET_REPORT_REJECTED,\n  SET_QUERY,\n  SET_DATA_SOURCE,\n  SET_MASS,\n  COMPARE_SET,\n  COMPARE_UPSERT,\n  COMPARE_REMOVE,\n  COMPARE_CLEAR,\n} from \"./actionTypes\";\nimport { combineReducers } from \"redux\";\nimport { connectRouter } from \"connected-react-router\";\nimport { uniqBy } from \"lodash\";\n\nconst initialState = {\n  searching: false,\n  searchQuery: \"\",\n  searchDataSource: \"STANDARD_REFERENCE\",\n  mass: 100,\n  reports: {},\n  compare: [],\n};\n\nconst appReducer = (state = initialState, { type, payload }) => {\n  console.log(type, payload);\n  switch (type) {\n    case SET_QUERY:\n      return {\n        ...state,\n        searchQuery: payload,\n        searchResult: undefined,\n        searchError: undefined,\n      };\n\n    case SET_DATA_SOURCE:\n      return {\n        ...state,\n        searchDataSource: payload,\n        searchResult: undefined,\n        searchError: undefined,\n      };\n\n    case SEARCH:\n      if (state.searchQuery === \"\") {\n        return {\n          ...state,\n          searching: false,\n          searchResult: undefined,\n          searchError: undefined,\n        };\n      } else {\n        return {\n          ...state,\n          searching: true,\n          searchResult: undefined,\n          searchError: undefined,\n        };\n      }\n\n    case SEARCH_FULFILLED:\n      return { ...state, searchResult: payload, searching: false };\n\n    case SEARCH_REJECTED:\n      return { ...state, searchError: payload, searching: false };\n\n    case GET_REPORT:\n      return {\n        ...state,\n        getReportNDBNO: payload,\n        gettingReport: true,\n        getReportResult: undefined,\n        getReportError: undefined,\n      };\n\n    case GET_REPORT_FULFILLED:\n      return {\n        ...state,\n        getReportResult: payload,\n        gettingReport: false,\n        getReportNDBNO: undefined,\n        reports: { ...state.reports, [payload.desc.ndbno]: payload },\n      };\n\n    case GET_REPORT_REJECTED:\n      return {\n        ...state,\n        getReportError: payload,\n        gettingReport: false,\n        getReportNDBNO: undefined,\n      };\n\n    case SET_MASS:\n      return { ...state, mass: payload };\n\n    case COMPARE_SET:\n      return { ...state, compare: payload };\n\n    case COMPARE_UPSERT:\n      return {\n        ...state,\n        compare: uniqBy([payload, ...state.compare], \"ndbno\"),\n      };\n\n    case COMPARE_REMOVE:\n      return {\n        ...state,\n        compare: state.compare.filter((item) => item.ndbno !== payload),\n      };\n    case COMPARE_CLEAR:\n      return {\n        ...state,\n        compare: initialState.compare,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default (history) =>\n  combineReducers({\n    router: connectRouter(history),\n    app: appReducer,\n  });\n","import { ajax } from \"rxjs/ajax\";\nimport {\n  mergeMap,\n  map,\n  catchError,\n  debounceTime,\n  filter,\n  tap,\n} from \"rxjs/operators\";\nimport { ofType, combineEpics } from \"redux-observable\";\nimport {\n  SEARCH,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_REJECTED,\n} from \"./actionTypes\";\nimport {\n  searchFulfilled,\n  searchRejected,\n  getReportRejected,\n  getReportFulfilled,\n} from \"./actions\";\nimport { of } from \"rxjs\";\n\nconst USDA_API_KEY = \"FYTSTF75mesLeO85VFSKvqgWEzdL0hQAYCZUtjJk\";\n\nconst decodeDataSource = (dataSourceCode) =>\n  ({\n    BOTH: encodeURIComponent(\"\"),\n    STANDARD_REFERENCE: encodeURIComponent(\"Standard Reference\"),\n    BRANDED_FOOD_PRODUCTS: encodeURIComponent(\"Branded Food Products\"),\n  }[dataSourceCode]);\n\nconst searchEpic = (action$, state$) =>\n  action$.pipe(\n    ofType(SEARCH),\n    debounceTime(500),\n    filter((action) => state$.value.app.searchQuery !== \"\"),\n    tap(console.log(state$.value)),\n    mergeMap((action) =>\n      ajax\n        .getJSON(\n          `https://api.nal.usda.gov/ndb/search?api_key=${USDA_API_KEY}&q=${encodeURIComponent(\n            state$.value.app.searchQuery\n          )}&ds=${decodeDataSource(state$.value.app.searchDataSource)}`\n        )\n        .pipe(\n          map((response) =>\n            response.errors\n              ? searchRejected(response)\n              : searchFulfilled(response)\n          ),\n          catchError((error) =>\n            of({\n              type: SEARCH_REJECTED,\n              payload: error.xhr.response,\n              error: true,\n            })\n          )\n        )\n    )\n  );\n\nconst getReportEpic = (action$) =>\n  action$.pipe(\n    ofType(GET_REPORT),\n    debounceTime(500),\n    mergeMap((action) =>\n      ajax\n        .getJSON(\n          `https://api.nal.usda.gov/ndb/V2/reports?api_key=${USDA_API_KEY}&ndbno=${encodeURIComponent(\n            action.payload\n          )}`\n        )\n        .pipe(\n          map((response) =>\n            response.foods[0].error\n              ? getReportRejected(response)\n              : getReportFulfilled(response.foods[0].food)\n          ),\n          catchError((error) =>\n            of({\n              type: GET_REPORT_REJECTED,\n              payload: error.xhr.response,\n              error: true,\n            })\n          )\n        )\n    )\n  );\n\nconst rootEpic = combineEpics(searchEpic, getReportEpic);\nexport default rootEpic;\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { createBrowserHistory } from \"history\";\nimport { routerMiddleware } from \"connected-react-router\";\nimport rootReducer from \"./rootReducer.js\";\nimport rootEpic from \"./rootEpic.js\";\n\nconst epicMiddleware = createEpicMiddleware();\nexport const history = createBrowserHistory({\n  basename: process.env.PUBLIC_URL + \"/\",\n});\n\nexport default function configureStore(preloadedState) {\n  const store = createStore(\n    rootReducer(history),\n    preloadedState,\n    compose(\n      applyMiddleware(routerMiddleware(history), epicMiddleware),\n      window.__REDUX_DEVTOOLS_EXTENSION__ &&\n        window.__REDUX_DEVTOOLS_EXTENSION__()\n    )\n  );\n\n  epicMiddleware.run(rootEpic);\n\n  return store;\n}\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport SearchPage from \"./Search/SearchPage\";\nimport ReportPage from \"./Report/ReportPage\";\nimport TablePage from \"./Table/TablePage\";\nimport CompareToaster from \"./Table/CompareToaster\";\nimport { ConnectedRouter } from \"connected-react-router\";\nimport { history } from \"./store\";\n\nexport class App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <ConnectedRouter history={history} basename={process.env.PUBLIC_URL}>\n          <Switch>\n            <Route path=\"/\" exact component={SearchPage} />\n            <Route path=\"/search\" exact component={SearchPage} />\n            <Route path=\"/report/:ndbno\" component={ReportPage} />\n            <Route path=\"/compare\" exact component={TablePage} />\n          </Switch>\n          <CompareToaster />\n        </ConnectedRouter>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport store, { history } from \"./store.js\";\nimport { Provider } from \"react-redux\";\nimport { ConnectedRouter } from \"connected-react-router\";\n\nReactDOM.render(\n  <Provider store={store()}>\n    <ConnectedRouter history={history}>\n      <App />\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}