(this["webpackJsonpusda-react"]=this["webpackJsonpusda-react"]||[]).push([[0],{252:function(e,t,a){e.exports=a(456)},257:function(e,t,a){},262:function(e,t,a){},456:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(62),o=a.n(c),u=(a(257),a(12)),i=a(13),s=a(15),l=a(14),p=a(16),m=a(32),d=(a(262),a(54)),b=a(22),h=a(7),f=a.n(h),O=a(31),E=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"SearchResultItem"},r.a.createElement(O.a,{to:"/report/".concat(this.props.item.ndbno)},r.a.createElement("h3",null,this.props.item.name)),r.a.createElement("div",{className:"SearchResultItem-meta"},r.a.createElement("span",{className:"SearchResultItem-metaDescriptor"},r.a.createElement("strong",null,"ndbno: "),this.props.item.ndbno),r.a.createElement("span",{className:"SearchResultItem-metaDescriptor"},r.a.createElement("strong",null,"Manufacturer: "),this.props.item.manu),r.a.createElement("span",{className:"SearchResultItem-metaDescriptor"},r.a.createElement("strong",null,"Data Source: "),this.props.item.ds)))}}]),a}(n.Component),j=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).handleItemClick=function(e){n.props.push("/report/".concat(e.target.value))},n.handleItemClick=n.handleItemClick.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=Object(h.sortBy)(this.props.result.list.item,"name"),t=this.props.result.list.q,a=this.props.result.list.ds,n=this.props.result.list.start+1,c=Number(this.props.result.list.end),o=this.props.result.list.total;return r.a.createElement("div",{className:"SearchResult"},r.a.createElement("div",{className:"descriptor"},'Result for "',t,'" in "',a,'" (',n," to ",c," of ",o,"):"),r.a.createElement("ul",null,e.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(E,{item:e}))}))))}}]),a}(n.Component),v={push:b.d},y=Object(p.c)((function(e){return{}}),v)(j),g=function(e){return{type:"SET_QUERY",payload:e}},R=function(e){return{type:"SET_DATA_SOURCE",payload:e}},C=function(){return{type:"SEARCH"}},S=function(e){return{type:"GET_REPORT",payload:e}},N=function(e,t){return{type:"COMPARE_UPSERT",payload:{ndbno:e,amount:t}}},k=a(34),D=a(4),T=["Proximates","Lipids","Vitamins","Minerals","Other"],_=function(e,t){return T.indexOf(e.group)-T.indexOf(t.group)},P=function(e){return T.indexOf(e.group)},A={BOTH:"Any",STANDARD_REFERENCE:"Standard Reference",BRANDED_FOOD_PRODUCTS:"Branded Food Products"},F=Object.keys(A),x=function(e){return A[e]},w=function(e,t){return Object(h.find)(e.nutrients,{name:t})},V=function(e,t){return Number(w(e,t)?w(e,t).value:void 0)},I=function(e){return Object(D.a)(Object(D.a)({},e),{},{nutrients:e.nutrients.reduce((function(e,t){return Object(D.a)(Object(D.a)({},e),{},Object(k.a)({},t.name,t))}),{})})},M={Energy:2e3,"Total lipid (fat)":67,"Fatty acids, total saturated":20,Cholesterol:300,"Carbohydrate, by difference":300,"Fiber, total dietary":25,Protein:50,"Vitamin C, total ascorbic acid":60,"Vitamin B-6":1.2,"Vitamin B-12":6,"Vitamin E (alpha-tocopherol)":15,"Vitamin K (phylloquinone)":120,Riboflavin:1.1,Thiamin:1.1,Niacin:14,"Folate, DFE":400,"Vitamin A, RAE":600,"Vitamin D":800,"Vitamin D (D2 + D3)":20,"Calcium, Ca":1e3,"Iron, Fe":19,"Magnesium, Mg":420,"Phosphorus, P":700,"Sodium, Na":2400,"Potassium, K":3533,"Zinc, Zn":8},B={"Vitamin C, total ascorbic acid":"Vitamin C","Vitamin B-6":"Vitamin B6","Vitamin B-12":"Vitamin B12","Vitamin E (alpha-tocopherol)":"Vitamin E","Vitamin K (phylloquinone)":"Vitamin E","Calcium, Ca":"Calcium","Iron, Fe":"Iron","Magnesium, Mg":"Magnesium","Phosphorus, P":"Phosphorus","Potassium, K":"Potassium","Sodium, Na":"Sodium","Zinc, Zn":"Zinc"},L=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).stringifyState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.searchQuery,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.searchDataSource;return"?query=".concat(e,"&dataSource=").concat(t)},n.handleInputChange=function(e){n.props.setQuery(e.target.value),n.props.push(n.stringifyState(e.target.value)),n.props.searchQuery&&n.props.search()},n.handleDataSourceChange=function(e){n.props.setDataSource(e.target.value),n.props.push(n.stringifyState(void 0,e.target.value)),n.props.searchQuery&&n.props.search()},n.handleInputChange=n.handleInputChange.bind(Object(d.a)(n)),n.handleDataSourceChange=n.handleDataSourceChange.bind(Object(d.a)(n)),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("label",null,r.a.createElement("input",{type:"text",className:"queryInput",value:this.props.searchQuery,onChange:this.handleInputChange,autoFocus:!0})),r.a.createElement("br",null),"Data Source:\xa0",F.map((function(t){return r.a.createElement("label",{className:"dataSourceInputLabel",key:t},r.a.createElement("input",{type:"radio",className:"dataSourceInput",value:t,checked:e.props.searchDataSource===t,onChange:e.handleDataSourceChange}),x(t))})))}}]),a}(n.Component),U={setQuery:g,setDataSource:R,search:C,push:b.d},Q=Object(p.c)((function(e){return{searchQuery:e.app.searchQuery,searchDataSource:e.app.searchDataSource}}),U)(L),q=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Logo"},r.a.createElement(O.a,{to:"/search"},r.a.createElement("h1",null,"USDA")))}}]),a}(n.Component),J=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;Object(u.a)(this,a),n=t.call(this,e);var r=new URLSearchParams(window.location.search);return r.has("dataSource")&&r.get("dataSource")!==n.props.dataSource&&n.props.setDataSource(r.get("dataSource")),r.has("query")?r.get("query")!==n.props.query&&(n.props.setQuery(r.get("query")),n.props.search()):n.props.setQuery(""),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.searching?r.a.createElement("span",null,'Searching for "',this.props.query,'" in'," ",x(this.props.dataSource),"..."):this.props.error?this.props.error.errors.error.map((function(e,t){return r.a.createElement("div",{key:t,style:{color:"red"}},e.message)})):this.props.result?r.a.createElement(y,{result:this.props.result}):null;return r.a.createElement("div",{className:"SearchPage"},r.a.createElement("div",{className:"header"},r.a.createElement(q,null),r.a.createElement(Q,null)),r.a.createElement("hr",null),r.a.createElement("div",{className:"ResultContainer"},e))}}]),a}(n.Component),H={setQuery:g,setDataSource:R,search:C},K=Object(p.c)((function(e){return{searching:e.app.searching,query:e.app.searchQuery,dataSource:e.app.searchDataSource,result:e.app.searchResult,error:e.app.searchError}}),H)(J),G=a(207),W=a.n(G),Z=(a(279),function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.name.split(", ");return r.a.createElement("div",{className:"Breadcrumbs"},t.map((function(t,a,n){return r.a.createElement("span",{key:a},"\xa0/\xa0",r.a.createElement(O.a,{to:{pathname:"/search",search:"?query=".concat(n.slice(0,a+1).join(", "),"&dataSource=").concat(e.props.dataSource)},className:"Breadcrumbs-item"},t))})))}}]),a}(n.Component)),X=Object(p.c)((function(e){return{dataSource:e.app.searchDataSource}}),{})(Z),Y=a(21),z=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getValue=function(t){return V(e.props.report,t)*e.props.mass/100},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.getValue("Total lipid (fat)"),t=this.getValue("Carbohydrate, by difference"),a=this.getValue("Protein"),n=this.getValue("Water"),c=this.props.mass-(e+t+a+n),o=[{name:"Total Fat",value:e},{name:"Total Carbs",value:t},{name:"Protein",value:a},{name:"Water",value:n},{name:"Other",value:c}],u=this.getValue("Fatty acids, total saturated"),i=this.getValue("Fatty acids, total polyunsaturated"),s=this.getValue("Fatty acids, total monounsaturated"),l=e-u-i-s,p=this.getValue("Fiber, total dietary"),m=this.getValue("Sugars, total"),d=[{name:"Polyunsat. Fat",value:i},{name:"Monounsat. Fat",value:s},{name:"Saturated Fat",value:u},{name:"Other Fats",value:l},{name:"Dietary Fiber",value:p},{name:"Sugar",value:m},{name:"Other Carbs",value:t-p-m},{name:"Protein",value:a},{name:"Water",value:n},{name:"Other",value:c}],b=[["#ffeb3b","#fdd835","#fbc02d","#f9a825"],["#aed581","#8bc34a","#689f38"],["#f06292"],["#2196f3"],["#e0e0e0"]],f=o.map((function(e,t){return{value:e.name,color:b[t][0]}}));return r.a.createElement(Y.h,{width:500,height:275},r.a.createElement(Y.g,{data:o,dataKey:"value",cx:250,cy:125,innerRadius:30,outerRadius:60,fill:"#8884d8",isAnimationActive:!1},o.map((function(e,t){return r.a.createElement(Y.d,{key:t,fill:b[t][0]})}))),r.a.createElement(Y.g,{data:d,dataKey:"value",cx:250,cy:125,innerRadius:70,outerRadius:90,fill:"red",labelLine:!1,label:function(e){var t=e.cx,a=e.cy,n=e.midAngle,c=e.innerRadius,o=e.outerRadius,u=e.value,i=e.index,s=e.fill;if(!function(e){return e.percent>.03}(e))return null;var l=Math.PI/180,p=10+c+(o-c),m=t+p*Math.cos(-n*l),b=a+p*Math.sin(-n*l);return u=new Intl.NumberFormat("en-IN",{maximumFractionDigits:1}).format(u),r.a.createElement("text",{x:m,y:b,fill:s,textAnchor:m>t?"start":"end",dominantBaseline:"central"},d[i].name," ",u," g")},isAnimationActive:!1},d.map((function(e,t){return r.a.createElement(Y.d,{key:"index",fill:Object(h.flatten)(b)[t]})})),r.a.createElement(Y.e,{value:"".concat(this.props.mass," g"),position:"center"})),r.a.createElement(Y.f,{payload:f}))}}]),a}(n.PureComponent),$=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=Math.round(this.props.calories/105),t=Math.round(this.props.calories/95),a=Math.round(this.props.calories/67),n=Math.round(this.props.calories/350);return r.a.createElement("div",{className:"Comparator"},r.a.createElement("div",{className:"Comparator-header"},r.a.createElement("h2",null,this.props.calories," kcal"),r.a.createElement("br",null),"equal"),r.a.createElement("div",{className:"emoji-comparator"},Object(h.times)(n,(function(e){return"\ud83c\udf79"})),r.a.createElement("br",null),n," Cups of Bubble Tea"),r.a.createElement("div",{className:"emoji-comparator"},Object(h.times)(e,(function(e){return"\ud83c\udf4c"})),r.a.createElement("br",null),e," Medium Bananas (118g)"),r.a.createElement("div",{className:"emoji-comparator"},Object(h.times)(t,(function(e){return"\ud83c\udf4e"})),r.a.createElement("br",null),t," Apples (182g)"),r.a.createElement("div",{className:"emoji-comparator"},Object(h.times)(a,(function(e){return"\ud83c\udf5e"})),r.a.createElement("br",null),a," Slices of White Bread (28g)"))}}]),a}(n.Component),ee=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.report.nutrients.find((function(e){return"Energy"===e.name})).value*this.props.mass/100;return r.a.createElement("div",{className:"Analysis"},r.a.createElement(z,{report:this.props.report,mass:this.props.mass}),r.a.createElement($,{calories:e}))}}]),a}(n.Component),te=Object(p.c)((function(e){return{mass:e.app.mass}}),{})(ee),ae=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(u.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).datum=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=w(e.props.report,t);return n?"".concat(Number(n.value*e.props.factor).toFixed(a)," ").concat(n.unit):null},e.reference=function(t){return M[t]?"".concat(Math.round(w(e.props.report,t).value*e.props.factor/M[t]*100)," %"):null},e.datumCell=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2?arguments[2]:void 0;return r.a.createElement("td",{className:"nutTable-left ".concat(!n&&"indent-2")},n?r.a.createElement("strong",null,a," "):a+" ",e.datum(t))},e.referenceCell=function(t){return r.a.createElement("td",{className:"nutTable-right"},e.reference(t))},e.tableRow=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return w(e.props.report,a)?r.a.createElement("tr",{key:t},e.datumCell(a,n,c),e.referenceCell(a)):null},e.doubleTable=function(t){var a=t.map((function(t){return e.datumCell(t.name,B[t.name],!0)})),n=t.map((function(t){return e.referenceCell(t.name)})),c=Object(h.chunk)(a,2),o=Object(h.chunk)(n,2);return r.a.createElement("table",{className:"nutTable"},r.a.createElement("tbody",null,c.map((function(e,t){return r.a.createElement("tr",{key:t},c[t][0],o[t][0],c[t][1]||r.a.createElement("td",{className:"nutTable-left"}),o[t][1]||r.a.createElement("td",{className:"nutTable-right"}))}))))},e.tableRows=[{label:"Calories",key:"Energy",main:!0},{label:"Total Fat",key:"Total lipid (fat)",main:!0},{label:"Saturated fat",key:"Fatty acids, total saturated",main:!1},{label:"Polyunsaturated fat",key:"Fatty acids, total polyunsaturated",main:!1},{label:"Monounsaturated fat",key:"Fatty acids, total monounsaturated",main:!1},{label:"Water",key:"Water",main:!0},{label:"Cholesterol",key:"Cholesterol",main:!0},{label:"Sodium",key:"Sodium, Na",main:!0},{label:"Potassium",key:"Potassium, K",main:!0},{label:"Total Carbohydrate",key:"Carbohydrate, by difference",main:!0},{label:"Dietary fiber",key:"Fiber, total dietary",main:!1},{label:"Sugar",key:"Sugars, total",main:!1},{label:"Protein",key:"Protein",main:!0}],e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=function(e){return Object(h.groupBy)(e,"group")}(function(e){return e.sort(_)}(this.props.report.nutrients));return r.a.createElement("div",{className:"Report"},r.a.createElement("table",{className:"nutTable"},r.a.createElement("tbody",null,this.tableRows.map((function(t,a){return e.tableRow(a,t.key,t.label,t.main)})))),t.Vitamins&&this.doubleTable(t.Vitamins),t.Minerals&&this.doubleTable(t.Minerals),t.Other&&this.doubleTable(t.Other))}}]),a}(n.Component),ne=Object(p.c)((function(e){return{mass:e.app.mass,factor:e.app.mass/100}}),{})(ae),re=a(18),ce=a(20);function oe(){var e=Object(re.a)(["\n        margin-top: 2rem;\n        margin-left: 2rem;\n        border: 8px solid #f06292;\n        border-top: 8px solid transparent; /* Blue */\n        border-radius: 50%;\n        width: 80px;\n        height: 80px;\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      "]);return oe=function(){return e},e}var ue=function(e){return r.a.createElement("div",{className:Object(ce.a)(oe())},"Loading")},ie=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).sliderPrecision=function(e){return e<25?1:e<100?5:e<500?10:50},n.urlNDBNO=n.props.match.params.ndbno,n.props.getReport(n.urlNDBNO),n}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.compareInsert,a=e.ndbno,n=e.mass;return r.a.createElement("div",{className:"ReportPage"},r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement("h1",null,this.props.loaded?"".concat(this.props.name):"Loading report for ndbno ".concat(this.urlNDBNO),r.a.createElement("button",{onClick:function(){return t(a,n)}},"Compare")),r.a.createElement("div",{className:"descriptor"},this.props.loaded&&r.a.createElement("small",null,[this.props.ds,this.props.manu,this.props.ndbno].filter((function(e){return e})).join(" \xb7 "))),this.props.loaded&&r.a.createElement(X,{name:this.props.name}),r.a.createElement(O.a,{to:"/search/",className:"newSearchLink"},"\u2190 New Search"),r.a.createElement(W.a,{className:"massInput",minValue:0,maxValue:1e3,step:this.sliderPrecision(this.props.mass),value:this.props.mass,onChange:this.props.setMass,formatLabel:function(e){return"Mass ".concat(e," g")}}))),this.props.loaded?r.a.createElement("div",{className:"ReportPage-container"},r.a.createElement("div",{className:"ReportPage-report"},r.a.createElement(ne,{report:this.props.report})),r.a.createElement("div",{className:"ReportPage-analysis"},r.a.createElement(te,{report:this.props.report}))):r.a.createElement(ue,null))}}]),a}(n.Component),se={getReport:S,setMass:function(e){return{type:"SET_MASS",payload:e}},compareInsert:N},le=Object(p.c)((function(e){return{loaded:!Object(h.isUndefined)(e.app.getReportResult),report:e.app.getReportResult,name:Object(h.get)(e.app.getReportResult,"desc.name"),ds:Object(h.get)(e.app.getReportResult,"desc.ds"),manu:Object(h.get)(e.app.getReportResult,"desc.manu"),ndbno:Object(h.get)(e.app.getReportResult,"desc.ndbno"),mass:e.app.mass}}),se)(ie),pe=a(114),me=a(67),de=a(149),be=a(220),he=a.n(be),fe=a(148),Oe=function(e){return e.app.reports},Ee=Object(fe.a)([Oe],Object.keys),je=(Object(fe.a)([Oe],Object.values),function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={error:null},n}return Object(i.a)(a,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("code",null,"error in subtree"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),a}(r.a.Component)),ve=a(228);function ye(){var e=Object(re.a)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  display: inline;\n  margin: 0;\n  padding: 0;\n  color: #5e5e5e;\n\n  &:hover {\n    color: #f06292;\n  }\n"]);return ye=function(){return e},e}var ge=a(227).a.button(ye());function Re(){var e=Object(re.a)(["\n                margin-top: 1rem;\n              "]);return Re=function(){return e},e}function Ce(){var e=Object(re.a)(["\n            display: flex;\n            flex-direction: column;\n            margin-right: 1rem;\n            min-width: 200px;\n          "]);return Ce=function(){return e},e}function Se(){var e=Object(re.a)(["\n          display: flex;\n          flex-direction: row;\n        "]);return Se=function(){return e},e}var Ne=function(e){return e.reduce((function(e,t){return Object(D.a)(Object(D.a)({},e),{},Object(k.a)({},t.name,Object(D.a)({selected:["Proximates"].includes(t.group)},t)))}),{})},ke=function(e){var t=e.nutrients,a=e.setNutrients,c=e.className,o=Object(ve.a)(e,["nutrients","setNutrients","className"]),u=Object(n.useState)(Ne(t)),i=Object(me.a)(u,2),s=i[0],l=i[1],p=Object(h.groupBy)(Object.values(s),"group");Object(n.useEffect)((function(){l((function(e){return Object(D.a)(Object(D.a)({},Ne(t)),e)}))}),[t]),Object(n.useEffect)((function(){a(Object.values(s))}),[s,a]);var m=function(e,t){l(Object(h.mapValues)(s,(function(a){return a.group===e?Object(h.set)(a,"selected",t):a})))},d=function(e){return l((function(t){return Object(D.a)(Object(D.a)({},t),{},Object(k.a)({},e,Object(D.a)(Object(D.a)({},t[e]),{},{selected:!t[e].selected})))}))};return r.a.createElement("div",Object.assign({className:Object(ce.a)(Se())+" ".concat(c)},o),Object(h.map)(p,(function(e,t){return r.a.createElement("div",{key:t,className:Object(ce.a)(Ce())},r.a.createElement("h4",null,t),r.a.createElement("hr",null),Object(h.map)(e,(function(e){var t=e.name;return r.a.createElement("label",{key:t},r.a.createElement("input",{type:"checkbox",name:t,checked:s[t]&&s[t].selected,onChange:Object(h.partial)(d,t)}),t)})),e.length>1&&r.a.createElement("div",{className:Object(ce.a)(Re())},r.a.createElement(ge,{onClick:Object(h.partial)(m,t,!0)},"Select All")," ","\xb7"," ",r.a.createElement(ge,{onClick:Object(h.partial)(m,t,!1)},"Select None")))})))};function De(){var e=Object(re.a)(["\n          margin-top: 2rem;\n        "]);return De=function(){return e},e}function Te(){var e=Object(re.a)(["\n          margin-top: 2rem;\n        "]);return Te=function(){return e},e}function _e(){var e=Object(re.a)(["\n        padding: 2rem 1rem;\n      "]);return _e=function(){return e},e}var Pe=["#f44336","#e91e63","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688"],Ae=[{name:"Name",selector:"desc.name",sortable:!0,compact:!0},{name:"ndbno",selector:"desc.ndbno",sortable:!0,compact:!0}],Fe={getReport:S,compareSet:function(e){return{type:"COMPARE_SET",payload:e}}},xe=Object(p.c)((function(e){var t=new URLSearchParams(Object(h.get)(e,"router.location.search","")).get("ids"),a=t?t.split(","):[];return{cachedIds:Ee(e),ids:a,reports:Object.values(Object(h.pick)(Oe(e),a)).map(I)}}),Fe)(Object(m.f)((function(e){var t=e.ids,a=e.cachedIds,c=e.reports,o=e.getReport,u=e.compareSet;Object(de.a)((function(){Object(h.difference)(t,a).forEach(o)}),[t,a,o]),Object(de.a)((function(){u(t.map((function(e){return{ndbno:e,amount:100}})))}),[t,u]);var i=Object(n.useMemo)((function(){return Object(h.chain)(c).map("nutrients").flatMap(Object.values).sortBy(P).map(Object(h.partial)(h.pick,f.a,["name","group"])).uniq().value()}),[c]),s=Object(n.useState)(null),l=Object(me.a)(s,2),p=l[0],m=l[1],d=Object(h.chain)(p).filter("selected").map((function(e){return{name:e.name,selector:function(t){return Object(h.get)(t,["nutrients",e.name,"value"],"-")},sortable:!0,compact:!0}})).value(),b=[].concat(Ae,Object(pe.a)(d)),O=Object(h.chain)(d).filter("selector").map((function(e){return Object(D.a)({name:e.name},Object(h.reduce)(c,(function(t,a){return Object(D.a)(Object(D.a)({},t),{},Object(k.a)({},a.desc.ndbno,Number(e.selector(a))))}),{}))})).value();return console.log(O),r.a.createElement("div",{className:Object(ce.a)(_e())},r.a.createElement(q,null),r.a.createElement(ke,{nutrients:i,setNutrients:m,className:Object(ce.a)(Te())}),r.a.createElement(je,null,r.a.createElement(he.a,{columns:b,data:c,title:"Reports",responsive:!0,dense:!0})),r.a.createElement(Y.i,{width:"100%",height:300,className:Object(ce.a)(De())},r.a.createElement(Y.b,{data:O},r.a.createElement(Y.c,{strokeDasharray:"3 3"}),r.a.createElement(Y.k,{dataKey:"name"}),r.a.createElement(Y.l,null),r.a.createElement(Y.j,null),r.a.createElement(Y.f,null),c.map((function(e,t){return r.a.createElement(Y.a,{key:e.desc.ndbno,dataKey:e.desc.ndbno,name:e.desc.name,fill:Pe[t%Pe.length]})})))))})));function we(){var e=Object(re.a)(["\n                    max-width: 200px;\n                    text-overflow: ellipsis;\n                    overflow: hidden;\n                    white-space: nowrap;\n                  "]);return we=function(){return e},e}function Ve(){var e=Object(re.a)(["\n            display: ",";\n            margin: 0;\n            margin-top: 0.5rem;\n            padding: 0.5rem;\n          "]);return Ve=function(){return e},e}function Ie(){var e=Object(re.a)(["\n              margin: 0;\n            "]);return Ie=function(){return e},e}function Me(){var e=Object(re.a)(["\n            display: flex;\n            justify-content: space-between;\n            background-color: #eaeaea;\n            padding: 0.5rem;\n          "]);return Me=function(){return e},e}function Be(){var e=Object(re.a)(["\n          display: ",";\n          position: fixed;\n          bottom: 0;\n          right: 5rem;\n          border: 1px solid black;\n          border-bottom: none;\n          background-color: white;\n          min-width: 300px;\n        "]);return Be=function(){return e},e}function Le(){var e=Object(re.a)(["\n      display: flex;\n      justify-content: space-between;\n      padding: 0.5rem;\n    "]);return Le=function(){return e},e}var Ue=function(e){return r.a.createElement("div",Object.assign({className:Object(ce.a)(Le())},e))},Qe=Object(m.f)((function(e){var t=e.compare,a=e.compareClear,c=e.compareRemove,o=e.location,u=t.length>0&&"/compare"!==o.pathname,i=Object(n.useState)(!0),s=Object(me.a)(i,2),l=s[0],p=s[1],m=Object(h.map)(t,"ndbno").join(",");return r.a.createElement("div",{className:Object(ce.a)(Be(),u?"initial":"none")},r.a.createElement("div",{className:Object(ce.a)(Me()),onClick:function(){return p(!l)}},r.a.createElement("h3",{className:Object(ce.a)(Ie())},"Collection ",r.a.createElement("small",null,"(",t.length,")")),l?" \ud83d\udd3c":" \ud83d\udd3d"),r.a.createElement("table",{className:Object(ce.a)(Ve(),l?"visible":"none")},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.ndbno},r.a.createElement("td",{className:Object(ce.a)(we()),title:e.report?e.report.desc.name:e.ndbno},e.report?e.report.desc.name:e.ndbno),r.a.createElement("td",null,e.amount," g"),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return c(e.ndbno)}},"X")))})))),r.a.createElement(Ue,{style:{display:l?"flex":"none"}},r.a.createElement("button",{onClick:a},"Clear Collection"),r.a.createElement(O.a,{to:"/compare?ids=".concat(m)},"Go to Collection")))})),qe={compareClear:function(e){return{type:"COMPARE_CLEAR"}},compareRemove:function(e){return{type:"COMPARE_REMOVE",payload:e}}},Je=Object(p.c)((function(e){return{compare:e.app.compare.map((function(t){return Object(D.a)(Object(D.a)({},t),{},{report:e.app.reports[t.ndbno]})}))}}),qe)(Qe),He=a(41),Ke=a(50),Ge=a(462),We=a(26),Ze=a(204),Xe={searching:!1,searchQuery:"",searchDataSource:"STANDARD_REFERENCE",mass:100,reports:{},compare:[]},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(console.log(a,n),a){case"SET_QUERY":return Object(D.a)(Object(D.a)({},e),{},{searchQuery:n,searchResult:void 0,searchError:void 0});case"SET_DATA_SOURCE":return Object(D.a)(Object(D.a)({},e),{},{searchDataSource:n,searchResult:void 0,searchError:void 0});case"SEARCH":return""===e.searchQuery?Object(D.a)(Object(D.a)({},e),{},{searching:!1,searchResult:void 0,searchError:void 0}):Object(D.a)(Object(D.a)({},e),{},{searching:!0,searchResult:void 0,searchError:void 0});case"SEARCH_FULFILLED":return Object(D.a)(Object(D.a)({},e),{},{searchResult:n,searching:!1});case"SEARCH_REJECTED":return Object(D.a)(Object(D.a)({},e),{},{searchError:n,searching:!1});case"GET_REPORT":return Object(D.a)(Object(D.a)({},e),{},{getReportNDBNO:n,gettingReport:!0,getReportResult:void 0,getReportError:void 0});case"GET_REPORT_FULFILLED":return Object(D.a)(Object(D.a)({},e),{},{getReportResult:n,gettingReport:!1,getReportNDBNO:void 0,reports:Object(D.a)(Object(D.a)({},e.reports),{},Object(k.a)({},n.desc.ndbno,n))});case"GET_REPORT_REJECTED":return Object(D.a)(Object(D.a)({},e),{},{getReportError:n,gettingReport:!1,getReportNDBNO:void 0});case"SET_MASS":return Object(D.a)(Object(D.a)({},e),{},{mass:n});case"COMPARE_SET":return Object(D.a)(Object(D.a)({},e),{},{compare:n});case"COMPARE_UPSERT":return Object(D.a)(Object(D.a)({},e),{},{compare:Object(h.uniqBy)([n].concat(Object(pe.a)(e.compare)),"ndbno")});case"COMPARE_REMOVE":return Object(D.a)(Object(D.a)({},e),{},{compare:e.compare.filter((function(e){return e.ndbno!==n}))});case"COMPARE_CLEAR":return Object(D.a)(Object(D.a)({},e),{},{compare:Xe.compare});default:return e}},ze=a(466),$e=a(465),et=a(457),tt=a(464),at=a(224),nt=a(109),rt=a(461),ct=a(223),ot=a(463),ut=a(225),it="FYTSTF75mesLeO85VFSKvqgWEzdL0hQAYCZUtjJk",st=Object(ot.a)((function(e,t){return e.pipe(Object(ct.a)("SEARCH"),Object($e.a)(500),Object(et.a)((function(e){return""!==t.value.app.searchQuery})),Object(tt.a)(console.log(t.value)),Object(at.a)((function(e){return ze.a.getJSON("https://api.nal.usda.gov/ndb/search?api_key=".concat(it,"&q=").concat(encodeURIComponent(t.value.app.searchQuery),"&ds=").concat((a=t.value.app.searchDataSource,{BOTH:encodeURIComponent(""),STANDARD_REFERENCE:encodeURIComponent("Standard Reference"),BRANDED_FOOD_PRODUCTS:encodeURIComponent("Branded Food Products")}[a]))).pipe(Object(nt.a)((function(e){return e.errors?{type:"SEARCH_REJECTED",payload:e}:function(e){return{type:"SEARCH_FULFILLED",payload:e}}(e)})),Object(rt.a)((function(e){return Object(ut.a)({type:"SEARCH_REJECTED",payload:e.xhr.response,error:!0})})));var a})))}),(function(e){return e.pipe(Object(ct.a)("GET_REPORT"),Object($e.a)(500),Object(at.a)((function(e){return ze.a.getJSON("https://api.nal.usda.gov/ndb/V2/reports?api_key=".concat(it,"&ndbno=").concat(encodeURIComponent(e.payload))).pipe(Object(nt.a)((function(e){return e.foods[0].error?{type:"GET_REPORT_REJECTED",payload:e}:function(e){return{type:"GET_REPORT_FULFILLED",payload:e}}(e.foods[0].food)})),Object(rt.a)((function(e){return Object(ut.a)({type:"GET_REPORT_REJECTED",payload:e.xhr.response,error:!0})})))})))})),lt=Object(Ge.a)(),pt=Object(We.a)({basename:"/usda-frontend/"});var mt=function(e){Object(s.a)(a,e);var t=Object(l.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(He.a,{history:pt,basename:"/usda-frontend"},r.a.createElement(m.c,null,r.a.createElement(m.a,{path:"/",exact:!0,component:K}),r.a.createElement(m.a,{path:"/search",exact:!0,component:K}),r.a.createElement(m.a,{path:"/report/:ndbno",component:le}),r.a.createElement(m.a,{path:"/compare",exact:!0,component:xe})),r.a.createElement(Je,null)))}}]),a}(n.Component),dt=Object(p.c)((function(e){return{}}),{})(mt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(p.a,{store:function(e){var t,a=Object(Ke.e)((t=pt,Object(Ke.c)({router:Object(He.b)(t),app:Ye})),e,Object(Ke.d)(Object(Ke.a)(Object(Ze.a)(pt),lt),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));return lt.run(st),a}()},r.a.createElement(He.a,{history:pt},r.a.createElement(dt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[252,1,2]]]);
//# sourceMappingURL=main.902a4824.chunk.js.map