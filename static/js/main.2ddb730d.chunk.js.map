{"version":3,"sources":["Search/SearchResultItem.js","Search/SearchResult.js","actions.js","actionTypes.js","usda.js","Search/SearchBar.js","Logo.js","Search/SearchPage.js","Report/Breadcrumbs.js","Report/ProximatesChart.js","Report/Comparator.js","Report/Analysis.js","Report/Report.js","Report/Loading.js","Report/ReportPage.js","selectors.js","Table/TablePage.js","App.js","serviceWorker.js","rootReducer.js","rootEpic.js","store.js","index.js"],"names":["SearchResultItem","className","to","this","props","item","ndbno","name","manu","ds","Component","SearchResult","handleItemClick","event","push","target","value","bind","items","sortBy","result","list","query","q","start","end","Number","total","map","index","key","mapDispatchToProps","connect","state","setQuery","type","payload","setDataSource","dataSource","search","getReport","groupOrder","compareNutrients","a","b","indexOf","group","dataSourceIdentifierLookup","BOTH","STANDARD_REFERENCE","BRANDED_FOOD_PRODUCTS","dataSourceIdentifiers","Object","keys","decodeDataSourceIdentifier","identifier","getNutrient","food","find","nutrients","getNutrientValue","undefined","pivotNutrients","report","reduce","nutrient","referenceIntake","Energy","Cholesterol","Protein","Riboflavin","Thiamin","Niacin","labels","SearchBar","stringifyState","searchQuery","searchDataSource","handleInputChange","handleDataSourceChange","onChange","autoFocus","checked","app","Logo","SearchPage","urlParams","URLSearchParams","window","location","has","get","searching","error","errors","style","color","message","searchResult","searchError","Breadcrumbs","fragments","split","fragment","pathname","slice","join","ProximatesChart","getValue","mass","totalFat","totalCarbs","protein","water","other","data01","saturatedFats","polySaturatedFats","monoSaturatedFats","otherFats","dietaryFiber","sugar","data02","colors","legend","entry","width","height","data","dataKey","cx","cy","innerRadius","outerRadius","fill","isAnimationActive","labelLine","label","midAngle","percent","sliceWideEnough","RADIAN","Math","PI","radius","x","cos","y","sin","Intl","NumberFormat","maximumFractionDigits","format","textAnchor","dominantBaseline","flatten","position","PureComponent","Comparator","bananas","round","calories","apples","bread","bubbleTeas","times","n","Analysis","Report","datum","precision","factor","toFixed","unit","reference","datumCell","main","referenceCell","tableRow","doubleTable","datumCells","referenceCells","datumCellChucks","chunk","referenceCellChucks","datumCellChunk","tableRows","nutrientGroups","groupBy","groupByNutrientGroup","sort","sortNutrientsByGroup","row","Loading","css","ReportPage","sliderPrecision","urlNDBNO","match","params","loaded","filter","e","minValue","maxValue","step","setMass","formatLabel","isUndefined","getReportResult","cachedReports","reports","cachedReportsIds","createSelector","columns","values","selector","sortable","ids","cachedIds","pick","useDeepCompareEffect","difference","forEach","title","responsive","App","path","exact","component","TablePage","Boolean","hostname","initialState","appReducer","console","log","getReportNDBNO","gettingReport","getReportError","desc","USDA_API_KEY","rootEpic","combineEpics","action$","state$","pipe","ofType","debounceTime","action","tap","mergeMap","ajax","getJSON","encodeURIComponent","dataSourceCode","response","searchFulfilled","catchError","of","xhr","foods","getReportFulfilled","epicMiddleware","createEpicMiddleware","history","createBrowserHistory","basename","process","ReactDOM","render","store","preloadedState","createStore","combineReducers","router","connectRouter","compose","applyMiddleware","routerMiddleware","__REDUX_DEVTOOLS_EXTENSION__","run","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.2ddb730d.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass SearchResultItem extends Component {\n  render() {\n    return (\n      <div className=\"SearchResultItem\">\n        <Link to={`/report/${this.props.item.ndbno}`}>\n          <h3>{this.props.item.name}</h3>\n        </Link>\n        <div className=\"SearchResultItem-meta\">\n          <span className=\"SearchResultItem-metaDescriptor\">\n            <strong>ndbno: </strong>\n            {this.props.item.ndbno}\n          </span>\n          <span className=\"SearchResultItem-metaDescriptor\">\n            <strong>Manufacturer: </strong>\n            {this.props.item.manu}\n          </span>\n          <span className=\"SearchResultItem-metaDescriptor\">\n            <strong>Data Source: </strong>\n            {this.props.item.ds}\n          </span>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default SearchResultItem;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { push } from \"connected-react-router\";\nimport { sortBy } from \"lodash\";\nimport SearchResultItem from \"./SearchResultItem\";\n\nclass SearchResult extends Component {\n  constructor(props) {\n    super(props);\n    this.handleItemClick = this.handleItemClick.bind(this);\n  }\n\n  handleItemClick = (event) => {\n    this.props.push(`/report/${event.target.value}`);\n  };\n\n  render() {\n    let items = sortBy(this.props.result.list.item, \"name\");\n    let query = this.props.result.list.q;\n    let ds = this.props.result.list.ds;\n    let start = this.props.result.list.start + 1;\n    let end = Number(this.props.result.list.end);\n    let total = this.props.result.list.total;\n\n    return (\n      <div className=\"SearchResult\">\n        <div className=\"descriptor\">\n          Result for \"{query}\" in \"{ds}\" ({start} to {end} of {total}):\n        </div>\n        <ul>\n          {items.map((item, index) => (\n            <li key={index}>\n              <SearchResultItem item={item}></SearchResultItem>\n            </li>\n          ))}\n        </ul>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {\n  push,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchResult);\n","import {\n  SEARCH,\n  SEARCH_FULFILLED,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_FULFILLED,\n  GET_REPORT_REJECTED,\n  SET_QUERY,\n  SET_DATA_SOURCE,\n  SET_MASS,\n} from \"./actionTypes\";\n\nexport const setQuery = (query) => ({ type: SET_QUERY, payload: query });\nexport const setDataSource = (dataSource) => ({\n  type: SET_DATA_SOURCE,\n  payload: dataSource,\n});\nexport const search = () => ({ type: SEARCH });\nexport const searchFulfilled = (result) => ({\n  type: SEARCH_FULFILLED,\n  payload: result,\n});\nexport const searchRejected = (result) => ({\n  type: SEARCH_REJECTED,\n  payload: result,\n});\nexport const getReport = (ndbno) => ({ type: GET_REPORT, payload: ndbno });\nexport const getReportFulfilled = (result) => ({\n  type: GET_REPORT_FULFILLED,\n  payload: result,\n});\nexport const getReportRejected = (result) => ({\n  type: GET_REPORT_REJECTED,\n  payload: result,\n});\nexport const setMass = (mass) => ({ type: SET_MASS, payload: mass });\n","export const SET_QUERY = \"SET_QUERY\";\nexport const SET_DATA_SOURCE = \"SET_DATA_SOURCE\";\nexport const SEARCH = \"SEARCH\";\nexport const SEARCH_FULFILLED = \"SEARCH_FULFILLED\";\nexport const SEARCH_REJECTED = \"SEARCH_REJECTED\";\nexport const GET_REPORT = \"GET_REPORT\";\nexport const GET_REPORT_FULFILLED = \"GET_REPORT_FULFILLED\";\nexport const GET_REPORT_REJECTED = \"GET_REPORT_REJECTED\";\nexport const SET_MASS = \"SET_MASS\";\n","import { groupBy, find } from \"lodash\";\n\nexport const groupOrder = [\n  \"Proximates\",\n  \"Vitamins\",\n  \"Minerals\",\n  \"Lipids\",\n  \"Other\",\n];\n\nexport const sortNutrientsByGroup = (nutrients) => {\n  return nutrients.sort(compareNutrients);\n};\n\nexport const compareNutrients = (a, b) => {\n  return groupOrder.indexOf(a.group) - groupOrder.indexOf(b.group);\n};\n\nexport const groupByNutrientGroup = (nutrients) => groupBy(nutrients, \"group\");\n\nexport const dataSourceIdentifierLookup = {\n  BOTH: \"Any\",\n  STANDARD_REFERENCE: \"Standard Reference\",\n  BRANDED_FOOD_PRODUCTS: \"Branded Food Products\",\n};\n\nexport const dataSourceIdentifiers = Object.keys(dataSourceIdentifierLookup);\n\nexport const decodeDataSourceIdentifier = (identifier) =>\n  dataSourceIdentifierLookup[identifier];\n\nexport const getNutrient = (food, name) => find(food.nutrients, { name });\n\nexport const getNutrientValue = (food, name) =>\n  Number(getNutrient(food, name) ? getNutrient(food, name).value : undefined);\n\nexport const pivotNutrients = (report) => ({\n  ...report,\n  nutrients: report.nutrients.reduce(\n    (nutrients, nutrient) => ({ ...nutrients, [nutrient.name]: nutrient }),\n    {}\n  ),\n});\n\nexport const referenceIntake = {\n  Energy: 2000,\n  \"Total lipid (fat)\": 67,\n  \"Fatty acids, total saturated\": 20,\n  Cholesterol: 300,\n  \"Carbohydrate, by difference\": 300,\n  \"Fiber, total dietary\": 25,\n  Protein: 50,\n  \"Vitamin C, total ascorbic acid\": 60,\n  \"Vitamin B-6\": 1.2,\n  \"Vitamin B-12\": 6,\n  \"Vitamin E (alpha-tocopherol)\": 15,\n  \"Vitamin K (phylloquinone)\": 120,\n  Riboflavin: 1.1,\n  Thiamin: 1.1,\n  Niacin: 14,\n  \"Folate, DFE\": 400,\n  \"Vitamin A, RAE\": 600,\n  \"Vitamin D\": 800,\n  \"Vitamin D (D2 + D3)\": 20,\n  \"Calcium, Ca\": 1000,\n  \"Iron, Fe\": 19,\n  \"Magnesium, Mg\": 420,\n  \"Phosphorus, P\": 700,\n  \"Sodium, Na\": 2400,\n  \"Potassium, K\": 3533,\n  \"Zinc, Zn\": 8,\n};\n\nexport const labels = {\n  \"Vitamin C, total ascorbic acid\": \"Vitamin C\",\n  \"Vitamin B-6\": \"Vitamin B6\",\n  \"Vitamin B-12\": \"Vitamin B12\",\n  \"Vitamin E (alpha-tocopherol)\": \"Vitamin E\",\n  \"Vitamin K (phylloquinone)\": \"Vitamin E\",\n  \"Calcium, Ca\": \"Calcium\",\n  \"Iron, Fe\": \"Iron\",\n  \"Magnesium, Mg\": \"Magnesium\",\n  \"Phosphorus, P\": \"Phosphorus\",\n  \"Potassium, K\": \"Potassium\",\n  \"Sodium, Na\": \"Sodium\",\n  \"Zinc, Zn\": \"Zinc\",\n};\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { setQuery, setDataSource, search } from \"../actions\";\nimport { dataSourceIdentifiers, decodeDataSourceIdentifier } from \"../usda\";\nimport { push } from \"connected-react-router\";\n\nclass SearchBar extends Component {\n  constructor(props) {\n    super(props);\n    this.handleInputChange = this.handleInputChange.bind(this);\n    this.handleDataSourceChange = this.handleDataSourceChange.bind(this);\n  }\n\n  stringifyState = (\n    query = this.props.searchQuery,\n    dataSource = this.props.searchDataSource\n  ) => {\n    return `?query=${query}&dataSource=${dataSource}`;\n  };\n\n  handleInputChange = (event) => {\n    this.props.setQuery(event.target.value);\n    this.props.push(this.stringifyState(event.target.value));\n    if (this.props.searchQuery) this.props.search();\n  };\n\n  handleDataSourceChange = (event) => {\n    this.props.setDataSource(event.target.value);\n    this.props.push(this.stringifyState(undefined, event.target.value));\n    if (this.props.searchQuery) this.props.search();\n  };\n\n  render() {\n    return (\n      <div className=\"SearchBar\">\n        <label>\n          <input\n            type=\"text\"\n            className=\"queryInput\"\n            value={this.props.searchQuery}\n            onChange={this.handleInputChange}\n            autoFocus\n          />\n        </label>\n        <br />\n        Data Source:&nbsp;\n        {dataSourceIdentifiers.map((identifier) => (\n          <label className=\"dataSourceInputLabel\" key={identifier}>\n            <input\n              type=\"radio\"\n              className=\"dataSourceInput\"\n              value={identifier}\n              checked={this.props.searchDataSource === identifier}\n              onChange={this.handleDataSourceChange}\n            ></input>\n            {decodeDataSourceIdentifier(identifier)}\n          </label>\n        ))}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  searchQuery: state.app.searchQuery,\n  searchDataSource: state.app.searchDataSource,\n});\n\nconst mapDispatchToProps = {\n  setQuery,\n  setDataSource,\n  search,\n  push,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchBar);\n","import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\n\nclass Logo extends Component {\n  render() {\n    return (\n      <div className=\"Logo\">\n        <Link to=\"/search\">\n          <h1>USDA</h1>\n        </Link>\n      </div>\n    );\n  }\n}\n\nexport default Logo;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport SearchResult from \"./SearchResult\";\nimport SearchBar from \"./SearchBar\";\nimport { setQuery, setDataSource, search } from \"../actions\";\nimport Logo from \"../Logo\";\nimport { decodeDataSourceIdentifier } from \"../usda\";\n\nclass SearchPage extends Component {\n  constructor(props) {\n    super(props);\n    let urlParams = new URLSearchParams(window.location.search);\n    if (\n      urlParams.has(\"dataSource\") &&\n      urlParams.get(\"dataSource\") !== this.props.dataSource\n    ) {\n      this.props.setDataSource(urlParams.get(\"dataSource\"));\n    }\n    if (urlParams.has(\"query\")) {\n      if (urlParams.get(\"query\") !== this.props.query) {\n        this.props.setQuery(urlParams.get(\"query\"));\n        this.props.search();\n      }\n    } else {\n      this.props.setQuery(\"\");\n    }\n  }\n\n  render() {\n    let result = this.props.searching ? (\n      <span>\n        Searching for \"{this.props.query}\" in{\" \"}\n        {decodeDataSourceIdentifier(this.props.dataSource)}...\n      </span>\n    ) : this.props.error ? (\n      this.props.error.errors.error.map((error, index) => (\n        <div key={index} style={{ color: \"red\" }}>\n          {error.message}\n        </div>\n      ))\n    ) : this.props.result ? (\n      <SearchResult result={this.props.result} />\n    ) : null;\n\n    return (\n      <div className=\"SearchPage\">\n        <div className=\"header\">\n          <Logo />\n          <SearchBar />\n        </div>\n        <hr />\n        <div className=\"ResultContainer\">{result}</div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  searching: state.app.searching,\n  query: state.app.searchQuery,\n  dataSource: state.app.searchDataSource,\n  result: state.app.searchResult,\n  // items: get(state.app.searchResult, 'list.item'),\n  error: state.app.searchError,\n});\n\nconst mapDispatchToProps = {\n  setQuery,\n  setDataSource,\n  search,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SearchPage);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nclass Breadcrumbs extends Component {\n  render() {\n    let fragments = this.props.name.split(\", \");\n    return (\n      <div className=\"Breadcrumbs\">\n        {fragments.map((fragment, index, fragments) => (\n          <span key={index}>\n            &nbsp;/&nbsp;\n            <Link\n              to={{\n                pathname: \"/search\",\n                search: `?query=${fragments\n                  .slice(0, index + 1)\n                  .join(\", \")}&dataSource=${this.props.dataSource}`,\n              }}\n              className=\"Breadcrumbs-item\"\n            >\n              {fragment}\n            </Link>\n          </span>\n        ))}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  dataSource: state.app.searchDataSource,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Breadcrumbs);\n","import React, { PureComponent } from \"react\";\nimport { PieChart, Pie, Cell, Label, Legend } from \"recharts\";\nimport { getNutrientValue } from \"../usda\";\nimport { flatten } from \"lodash\";\n\nexport default class ProximatesChart extends PureComponent {\n  getValue = (key) =>\n    (getNutrientValue(this.props.report, key) * this.props.mass) / 100;\n\n  render() {\n    let totalFat = this.getValue(\"Total lipid (fat)\");\n    let totalCarbs = this.getValue(\"Carbohydrate, by difference\");\n    let protein = this.getValue(\"Protein\");\n    let water = this.getValue(\"Water\");\n    let other = this.props.mass - (totalFat + totalCarbs + protein + water);\n\n    const data01 = [\n      { name: \"Total Fat\", value: totalFat },\n      { name: \"Total Carbs\", value: totalCarbs },\n      { name: \"Protein\", value: protein },\n      { name: \"Water\", value: water },\n      { name: \"Other\", value: other },\n    ];\n\n    let saturatedFats = this.getValue(\"Fatty acids, total saturated\");\n    let polySaturatedFats = this.getValue(\"Fatty acids, total polyunsaturated\");\n    let monoSaturatedFats = this.getValue(\"Fatty acids, total monounsaturated\");\n    let otherFats =\n      totalFat - saturatedFats - polySaturatedFats - monoSaturatedFats;\n\n    let dietaryFiber = this.getValue(\"Fiber, total dietary\");\n    let sugar = this.getValue(\"Sugars, total\");\n    let otherCarbs = totalCarbs - dietaryFiber - sugar;\n\n    const data02 = [\n      { name: \"Polyunsat. Fat\", value: polySaturatedFats },\n      { name: \"Monounsat. Fat\", value: monoSaturatedFats },\n      { name: \"Saturated Fat\", value: saturatedFats },\n      { name: \"Other Fats\", value: otherFats },\n      { name: \"Dietary Fiber\", value: dietaryFiber },\n      { name: \"Sugar\", value: sugar },\n      { name: \"Other Carbs\", value: otherCarbs },\n      { name: \"Protein\", value: protein },\n      { name: \"Water\", value: water },\n      { name: \"Other\", value: other },\n    ];\n\n    let sliceWideEnough = (props) => {\n      return props.percent > 0.03;\n    };\n\n    let label = (props) => {\n      let {\n        cx,\n        cy,\n        midAngle,\n        innerRadius,\n        outerRadius,\n        value,\n        index,\n        fill,\n      } = props;\n\n      if (!sliceWideEnough(props)) return null;\n\n      const RADIAN = Math.PI / 180;\n      const radius = 10 + innerRadius + (outerRadius - innerRadius);\n      const x = cx + radius * Math.cos(-midAngle * RADIAN);\n      const y = cy + radius * Math.sin(-midAngle * RADIAN);\n      value = new Intl.NumberFormat(\"en-IN\", {\n        maximumFractionDigits: 1,\n      }).format(value);\n\n      return (\n        <text\n          x={x}\n          y={y}\n          fill={fill}\n          textAnchor={x > cx ? \"start\" : \"end\"}\n          dominantBaseline=\"central\"\n        >\n          {data02[index].name} {value} g\n        </text>\n      );\n    };\n\n    let colors = [\n      [\"#ffeb3b\", \"#fdd835\", \"#fbc02d\", \"#f9a825\"],\n      [\"#aed581\", \"#8bc34a\", \"#689f38\"],\n      [\"#f06292\"],\n      [\"#2196f3\"],\n      [\"#e0e0e0\"],\n    ];\n\n    let legend = data01.map((entry, index) => ({\n      value: entry.name,\n      color: colors[index][0],\n    }));\n\n    return (\n      <PieChart width={500} height={275}>\n        <Pie\n          data={data01}\n          dataKey=\"value\"\n          cx={250}\n          cy={125}\n          innerRadius={30}\n          outerRadius={60}\n          fill=\"#8884d8\"\n          isAnimationActive={false}\n        >\n          {data01.map((entry, index) => (\n            <Cell key={index} fill={colors[index][0]} />\n          ))}\n        </Pie>\n        <Pie\n          data={data02}\n          dataKey=\"value\"\n          cx={250}\n          cy={125}\n          innerRadius={70}\n          outerRadius={90}\n          fill=\"red\"\n          labelLine={false}\n          label={label}\n          isAnimationActive={false}\n        >\n          {data02.map((entry, index) => (\n            <Cell key={`index`} fill={flatten(colors)[index]} />\n          ))}\n          <Label value={`${this.props.mass} g`} position=\"center\" />\n        </Pie>\n        <Legend payload={legend} />\n      </PieChart>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { times } from \"lodash\";\n\nconst BANANA_FACTOR = 105;\nconst APPLE_FACTOR = 95;\nconst BREAD_FACTOR = 67;\nconst BUBBLE_TEA_FACTOR = 350;\n\nclass Comparator extends Component {\n  render() {\n    let bananas = Math.round(this.props.calories / BANANA_FACTOR);\n    let apples = Math.round(this.props.calories / APPLE_FACTOR);\n    let bread = Math.round(this.props.calories / BREAD_FACTOR);\n    let bubbleTeas = Math.round(this.props.calories / BUBBLE_TEA_FACTOR);\n\n    return (\n      <div className=\"Comparator\">\n        <div className=\"Comparator-header\">\n          <h2>{this.props.calories} kcal</h2>\n          <br />\n          equal\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(bubbleTeas, (n) => \"üçπ\")}\n          <br />\n          {bubbleTeas} Cups of Bubble Tea\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(bananas, (n) => \"üçå\")}\n          <br />\n          {bananas} Medium Bananas (118g)\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(apples, (n) => \"üçé\")}\n          <br />\n          {apples} Apples (182g)\n        </div>\n        <div className=\"emoji-comparator\">\n          {times(bread, (n) => \"üçû\")}\n          <br />\n          {bread} Slices of White Bread (28g)\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Comparator;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport ProximatesChart from \"./ProximatesChart\";\nimport Comparator from \"./Comparator\";\n\nclass Analysis extends Component {\n  render() {\n    let calories =\n      (this.props.report.nutrients.find(\n        (nutrient) => nutrient.name === \"Energy\"\n      ).value *\n        this.props.mass) /\n      100;\n\n    return (\n      <div className=\"Analysis\">\n        <ProximatesChart report={this.props.report} mass={this.props.mass} />\n        <Comparator calories={calories} />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  mass: state.app.mass,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Analysis);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport {\n  sortNutrientsByGroup,\n  groupByNutrientGroup,\n  getNutrient,\n  referenceIntake,\n  labels,\n} from \"../usda\";\nimport { chunk } from \"lodash\";\n\nclass Report extends Component {\n  datum = (key, precision = 0) => {\n    let nutrient = getNutrient(this.props.report, key);\n    if (!nutrient) return null;\n    return `${Number(nutrient.value * this.props.factor).toFixed(precision)} ${\n      nutrient.unit\n    }`;\n  };\n\n  reference = (key) => {\n    return referenceIntake[key]\n      ? `${Math.round(\n          ((getNutrient(this.props.report, key).value * this.props.factor) /\n            referenceIntake[key]) *\n            100\n        )} %`\n      : null;\n  };\n\n  datumCell = (key, label = key, main) => (\n    <td className={`nutTable-left ${!main && \"indent-2\"}`}>\n      {main ? <strong>{label} </strong> : label + \" \"}\n      {this.datum(key)}\n    </td>\n  );\n  referenceCell = (key) => (\n    <td className=\"nutTable-right\">{this.reference(key)}</td>\n  );\n\n  tableRow = (index, key, label = key, main = false) => {\n    if (getNutrient(this.props.report, key)) {\n      return (\n        <tr key={index}>\n          {this.datumCell(key, label, main)}\n          {this.referenceCell(key)}\n        </tr>\n      );\n    } else {\n      return null;\n    }\n  };\n\n  doubleTable = (nutrients) => {\n    let datumCells = nutrients.map((nutrient) =>\n      this.datumCell(nutrient.name, labels[nutrient.name], true)\n    );\n    let referenceCells = nutrients.map((nutrient) =>\n      this.referenceCell(nutrient.name)\n    );\n\n    let datumCellChucks = chunk(datumCells, 2);\n    let referenceCellChucks = chunk(referenceCells, 2);\n\n    return (\n      <table className=\"nutTable\">\n        <tbody>\n          {datumCellChucks.map((datumCellChunk, index) => (\n            <tr key={index}>\n              {datumCellChucks[index][0]}\n              {referenceCellChucks[index][0]}\n              {datumCellChucks[index][1] || <td className=\"nutTable-left\"></td>}\n              {referenceCellChucks[index][1] || (\n                <td className=\"nutTable-right\"></td>\n              )}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    );\n  };\n\n  tableRows = [\n    { label: \"Calories\", key: \"Energy\", main: true },\n    { label: \"Total Fat\", key: \"Total lipid (fat)\", main: true },\n    {\n      label: \"Saturated fat\",\n      key: \"Fatty acids, total saturated\",\n      main: false,\n    },\n    {\n      label: \"Polyunsaturated fat\",\n      key: \"Fatty acids, total polyunsaturated\",\n      main: false,\n    },\n    {\n      label: \"Monounsaturated fat\",\n      key: \"Fatty acids, total monounsaturated\",\n      main: false,\n    },\n    { label: \"Water\", key: \"Water\", main: true },\n    { label: \"Cholesterol\", key: \"Cholesterol\", main: true },\n    { label: \"Sodium\", key: \"Sodium, Na\", main: true },\n    { label: \"Potassium\", key: \"Potassium, K\", main: true },\n    {\n      label: \"Total Carbohydrate\",\n      key: \"Carbohydrate, by difference\",\n      main: true,\n    },\n    { label: \"Dietary fiber\", key: \"Fiber, total dietary\", main: false },\n    { label: \"Sugar\", key: \"Sugars, total\", main: false },\n    { label: \"Protein\", key: \"Protein\", main: true },\n  ];\n\n  render() {\n    let nutrients = sortNutrientsByGroup(this.props.report.nutrients);\n    let nutrientGroups = groupByNutrientGroup(nutrients);\n\n    return (\n      <div className=\"Report\">\n        <table className=\"nutTable\">\n          <tbody>\n            {this.tableRows.map((row, index) =>\n              this.tableRow(index, row.key, row.label, row.main)\n            )}\n          </tbody>\n        </table>\n        {nutrientGroups[\"Vitamins\"] &&\n          this.doubleTable(nutrientGroups[\"Vitamins\"])}\n        {nutrientGroups[\"Minerals\"] &&\n          this.doubleTable(nutrientGroups[\"Minerals\"])}\n        {nutrientGroups[\"Other\"] && this.doubleTable(nutrientGroups[\"Other\"])}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  mass: state.app.mass,\n  factor: state.app.mass / 100,\n});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Report);\n","import React from \"react\";\nimport { css } from \"emotion\";\n\nconst Loading = (props) => {\n  return (\n    <div\n      className={css`\n        margin-top: 2rem;\n        margin-left: 2rem;\n        border: 8px solid #f06292;\n        border-top: 8px solid transparent; /* Blue */\n        border-radius: 50%;\n        width: 80px;\n        height: 80px;\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      `}\n    >\n      Loading\n    </div>\n  );\n};\n\nexport default Loading;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\n\nimport InputRange from \"react-input-range\";\nimport \"react-input-range/lib/css/index.css\";\nimport { get, isUndefined } from \"lodash\";\nimport { css } from \"emotion\";\n\nimport Breadcrumbs from \"./Breadcrumbs\";\nimport Analysis from \"./Analysis\";\nimport Report from \"./Report\";\nimport Loading from \"./Loading\";\n\nimport { getReport, setMass } from \"../actions\";\n\nclass ReportPage extends Component {\n  constructor(props) {\n    super(props);\n    this.urlNDBNO = this.props.match.params.ndbno;\n    this.props.getReport(this.urlNDBNO);\n  }\n\n  sliderPrecision = (mass) => {\n    if (mass < 25) return 1;\n    if (mass < 100) return 5;\n    if (mass < 500) return 10;\n    return 50;\n  };\n\n  render() {\n    return (\n      <div className=\"ReportPage\">\n        <div className=\"header\">\n          <div>\n            <h1>\n              {this.props.loaded\n                ? `${this.props.name}`\n                : `Loading report for ndbno ${this.urlNDBNO}`}\n              <br />\n            </h1>\n            <div className=\"descriptor\">\n              {this.props.loaded && (\n                <small>\n                  {[this.props.ds, this.props.manu, this.props.ndbno]\n                    .filter((e) => e)\n                    .join(\" ¬∑ \")}\n                </small>\n              )}\n            </div>\n            {this.props.loaded && <Breadcrumbs name={this.props.name} />}\n            <Link to=\"/search/\" className=\"newSearchLink\">\n              &#8592; New Search\n            </Link>\n            <InputRange\n              className=\"massInput\"\n              minValue={0}\n              maxValue={1000}\n              step={this.sliderPrecision(this.props.mass)}\n              value={this.props.mass}\n              onChange={this.props.setMass}\n              formatLabel={(value) => `Mass ${value} g`}\n            />\n          </div>\n        </div>\n        {this.props.loaded ? (\n          <div className=\"ReportPage-container\">\n            <div className=\"ReportPage-report\">\n              <Report report={this.props.report} />\n            </div>\n            <div className=\"ReportPage-analysis\">\n              <Analysis report={this.props.report} />\n            </div>\n          </div>\n        ) : (\n          <Loading />\n        )}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({\n  loaded: !isUndefined(state.app.getReportResult),\n  report: state.app.getReportResult,\n  name: get(state.app.getReportResult, \"desc.name\"),\n  ds: get(state.app.getReportResult, \"desc.ds\"),\n  manu: get(state.app.getReportResult, \"desc.manu\"),\n  ndbno: get(state.app.getReportResult, \"desc.ndbno\"),\n  mass: state.app.mass,\n});\n\nconst mapDispatchToProps = {\n  getReport,\n  setMass,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReportPage);\n","import { createSelector } from \"reselect\";\n\nexport const cachedReports = (state) => state.app.reports;\nexport const cachedReportsIds = createSelector([cachedReports], Object.keys);\nexport const cachedReportsAsArray = createSelector(\n  [cachedReports],\n  Object.values\n);\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport useDeepCompareEffect from \"use-deep-compare-effect\";\n\nimport { get, difference, pick } from \"lodash\";\n\nimport DataTable from \"react-data-table-component\";\n\nimport { getReport } from \"../actions\";\nimport { cachedReportsIds, cachedReports } from \"../selectors\";\nimport { pivotNutrients } from \"../usda\";\n\nconst columns = [\n  {\n    name: \"Name\",\n    selector: \"desc.name\",\n    sortable: true,\n  },\n  {\n    name: \"ndbno\",\n    selector: \"desc.ndbno\",\n    sortable: true,\n  },\n  {\n    name: \"Water\",\n    selector: \"nutrients.Water.value\",\n    sortable: true,\n  },\n  {\n    name: \"Energy\",\n    selector: \"nutrients.Energy.value\",\n    sortable: true,\n  },\n  {\n    name: \"Protein\",\n    selector: \"nutrients.Protein.value\",\n    sortable: true,\n  },\n];\n\nexport const TablePage = ({ ids, cachedIds, reports, getReport }) => {\n  useDeepCompareEffect(() => {\n    const idsToGet = difference(ids, cachedIds);\n    idsToGet.forEach(getReport);\n  }, [ids, cachedIds, getReport]);\n  return (\n    <div>\n      <DataTable columns={columns} data={reports} title=\"Reports\" responsive />\n    </div>\n  );\n};\n\nTablePage.propTypes = {\n  ids: PropTypes.arrayOf(PropTypes.string),\n  cachedIds: PropTypes.arrayOf(PropTypes.string),\n  reports: PropTypes.arrayOf(PropTypes.object),\n  getReport: PropTypes.func,\n};\n\nconst mapStateToProps = (state) => {\n  const ids = get(state, \"router.location.query.ids\", \"\").split(\",\");\n  return {\n    cachedIds: cachedReportsIds(state),\n    ids,\n    reports: Object.values(pick(cachedReports(state), ids)).map(pivotNutrients),\n  };\n};\n\nconst mapDispatchToProps = {\n  getReport,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TablePage);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Route, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport SearchPage from \"./Search/SearchPage\";\nimport ReportPage from \"./Report/ReportPage\";\nimport TablePage from \"./Table/TablePage\";\n\nexport class App extends Component {\n  render() {\n    return (\n      <div className=\"App\">\n        <Switch>\n          <Route path=\"/\" exact component={SearchPage} />\n          <Route path=\"/search\" component={SearchPage} />\n          <Route path=\"/report/:ndbno\" component={ReportPage} />\n          <Route path=\"/compare\" component={TablePage} />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ({});\n\nconst mapDispatchToProps = {};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import {\n  SEARCH,\n  SEARCH_FULFILLED,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_FULFILLED,\n  GET_REPORT_REJECTED,\n  SET_QUERY,\n  SET_DATA_SOURCE,\n  SET_MASS,\n} from \"./actionTypes\";\nimport { combineReducers } from \"redux\";\nimport { connectRouter } from \"connected-react-router\";\n\nconst initialState = {\n  searching: false,\n  searchQuery: \"\",\n  searchDataSource: \"STANDARD_REFERENCE\",\n  mass: 100,\n  reports: {},\n};\n\nconst appReducer = (state = initialState, { type, payload }) => {\n  console.log(type, payload);\n  switch (type) {\n    case SET_QUERY:\n      return {\n        ...state,\n        searchQuery: payload,\n        searchResult: undefined,\n        searchError: undefined,\n      };\n\n    case SET_DATA_SOURCE:\n      return {\n        ...state,\n        searchDataSource: payload,\n        searchResult: undefined,\n        searchError: undefined,\n      };\n\n    case SEARCH:\n      if (state.searchQuery === \"\") {\n        return {\n          ...state,\n          searching: false,\n          searchResult: undefined,\n          searchError: undefined,\n        };\n      } else {\n        return {\n          ...state,\n          searching: true,\n          searchResult: undefined,\n          searchError: undefined,\n        };\n      }\n\n    case SEARCH_FULFILLED:\n      return { ...state, searchResult: payload, searching: false };\n\n    case SEARCH_REJECTED:\n      return { ...state, searchError: payload, searching: false };\n\n    case GET_REPORT:\n      return {\n        ...state,\n        getReportNDBNO: payload,\n        gettingReport: true,\n        getReportResult: undefined,\n        getReportError: undefined,\n      };\n\n    case GET_REPORT_FULFILLED:\n      return {\n        ...state,\n        getReportResult: payload,\n        gettingReport: false,\n        getReportNDBNO: undefined,\n        reports: { ...state.reports, [payload.desc.ndbno]: payload },\n      };\n\n    case GET_REPORT_REJECTED:\n      return {\n        ...state,\n        getReportError: payload,\n        gettingReport: false,\n        getReportNDBNO: undefined,\n      };\n\n    case SET_MASS:\n      return { ...state, mass: payload };\n\n    default:\n      return state;\n  }\n};\n\nexport default (history) =>\n  combineReducers({\n    router: connectRouter(history),\n    app: appReducer,\n  });\n","import { ajax } from \"rxjs/ajax\";\nimport {\n  mergeMap,\n  map,\n  catchError,\n  debounceTime,\n  filter,\n  tap,\n} from \"rxjs/operators\";\nimport { ofType, combineEpics } from \"redux-observable\";\nimport {\n  SEARCH,\n  SEARCH_REJECTED,\n  GET_REPORT,\n  GET_REPORT_REJECTED,\n} from \"./actionTypes\";\nimport {\n  searchFulfilled,\n  searchRejected,\n  getReportRejected,\n  getReportFulfilled,\n} from \"./actions\";\nimport { of } from \"rxjs\";\n\nconst USDA_API_KEY = \"FYTSTF75mesLeO85VFSKvqgWEzdL0hQAYCZUtjJk\";\n\nconst decodeDataSource = (dataSourceCode) =>\n  ({\n    BOTH: encodeURIComponent(\"\"),\n    STANDARD_REFERENCE: encodeURIComponent(\"Standard Reference\"),\n    BRANDED_FOOD_PRODUCTS: encodeURIComponent(\"Branded Food Products\"),\n  }[dataSourceCode]);\n\nconst searchEpic = (action$, state$) =>\n  action$.pipe(\n    ofType(SEARCH),\n    debounceTime(500),\n    filter((action) => state$.value.app.searchQuery !== \"\"),\n    tap(console.log(state$.value)),\n    mergeMap((action) =>\n      ajax\n        .getJSON(\n          `https://api.nal.usda.gov/ndb/search?api_key=${USDA_API_KEY}&q=${encodeURIComponent(\n            state$.value.app.searchQuery\n          )}&ds=${decodeDataSource(state$.value.app.searchDataSource)}`\n        )\n        .pipe(\n          map((response) =>\n            response.errors\n              ? searchRejected(response)\n              : searchFulfilled(response)\n          ),\n          catchError((error) =>\n            of({\n              type: SEARCH_REJECTED,\n              payload: error.xhr.response,\n              error: true,\n            })\n          )\n        )\n    )\n  );\n\nconst getReportEpic = (action$) =>\n  action$.pipe(\n    ofType(GET_REPORT),\n    debounceTime(500),\n    mergeMap((action) =>\n      ajax\n        .getJSON(\n          `https://api.nal.usda.gov/ndb/V2/reports?api_key=${USDA_API_KEY}&ndbno=${encodeURIComponent(\n            action.payload\n          )}`\n        )\n        .pipe(\n          map((response) =>\n            response.foods[0].error\n              ? getReportRejected(response)\n              : getReportFulfilled(response.foods[0].food)\n          ),\n          catchError((error) =>\n            of({\n              type: GET_REPORT_REJECTED,\n              payload: error.xhr.response,\n              error: true,\n            })\n          )\n        )\n    )\n  );\n\nconst rootEpic = combineEpics(searchEpic, getReportEpic);\nexport default rootEpic;\n","import { createStore, applyMiddleware, compose } from \"redux\";\nimport { createEpicMiddleware } from \"redux-observable\";\nimport { createBrowserHistory } from \"history\";\nimport { routerMiddleware } from \"connected-react-router\";\nimport rootReducer from \"./rootReducer.js\";\nimport rootEpic from \"./rootEpic.js\";\n\nconst epicMiddleware = createEpicMiddleware();\nexport const history = createBrowserHistory({\n  basename: process.env.PUBLIC_URL + \"/\",\n});\n\nexport default function configureStore(preloadedState) {\n  const store = createStore(\n    rootReducer(history),\n    preloadedState,\n    compose(\n      applyMiddleware(routerMiddleware(history), epicMiddleware),\n      window.__REDUX_DEVTOOLS_EXTENSION__ &&\n        window.__REDUX_DEVTOOLS_EXTENSION__()\n    )\n  );\n\n  epicMiddleware.run(rootEpic);\n\n  return store;\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport store, { history } from \"./store.js\";\nimport { Provider } from \"react-redux\";\nimport { ConnectedRouter } from \"connected-react-router\";\n\nReactDOM.render(\n  <Provider store={store()}>\n    <ConnectedRouter history={history}>\n      <App />\n    </ConnectedRouter>\n  </Provider>,\n  document.getElementById(\"root\")\n);\n\nserviceWorker.unregister();\n"],"sourceRoot":""}