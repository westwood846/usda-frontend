(window["webpackJsonpusda-react"]=window["webpackJsonpusda-react"]||[]).push([[0],{69:function(e,t,a){e.exports=a(82)},74:function(e,t,a){},79:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(41),o=a.n(c),u=(a(74),a(7)),s=a(8),l=a(10),p=a(9),i=a(11),h=a(6),d=a(21),m=(a(79),a(24)),E=a(13),O=a(18),b=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleItemClick=function(e){a.props.push("/report/".concat(e.target.value))},a.handleItemClick=a.handleItemClick.bind(Object(m.a)(a)),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=Object(O.sortBy)(this.props.result.list.item,"name"),a=this.props.result.list.q,r=this.props.result.list.ds,c=this.props.result.list.start,o=Number(this.props.result.list.end)-1,u=this.props.result.list.total;return n.a.createElement("div",{className:"SearchResult"},n.a.createElement("div",null,'Result for "',a,'" in "',r,'" (',c," to ",o," of ",u,"):"),n.a.createElement("ul",null,t.map(function(t,a){return n.a.createElement("li",{key:a},n.a.createElement("button",{onClick:e.handleItemClick,value:t.ndbno},t.name))})))}}]),t}(r.Component),j={push:E.d},f=Object(h.c)(function(e){return{}},j)(b),R=function(e){return{type:"SET_QUERY",payload:e}},g=function(){return{type:"SEARCH"}},y=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).handleInputChange=function(e){a.props.setQuery(e.target.value),a.props.searchQuery&&a.props.search()},a.handleDataSourceChange=function(e){a.props.setDataSource(e.target.value),a.props.searchQuery&&a.props.search()},a.handleInputChange=a.handleInputChange.bind(Object(m.a)(a)),a.handleDataSourceChange=a.handleDataSourceChange.bind(Object(m.a)(a)),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"SearchBar"},n.a.createElement("label",null,"Search: ",n.a.createElement("input",{type:"text",className:"queryInput",value:this.props.searchQuery,onChange:this.handleInputChange,autoFocus:!0})),n.a.createElement("br",null),"Data Source:\xa0",n.a.createElement("label",{className:"dataSourceInputLabel"},n.a.createElement("input",{type:"radio",className:"dataSourceInput",value:"BOTH",checked:"BOTH"===this.props.searchDataSource,onChange:this.handleDataSourceChange}),"Both"),n.a.createElement("label",{className:"dataSourceInputLabel"},n.a.createElement("input",{type:"radio",className:"dataSourceInput",value:"STANDARD_REFERENCE",checked:"STANDARD_REFERENCE"===this.props.searchDataSource,onChange:this.handleDataSourceChange}),"Standard Reference"),n.a.createElement("label",{className:"dataSourceInputLabel"},n.a.createElement("input",{type:"radio",className:"dataSourceInput",value:"BRANDED_FOOD_PRODUCTS",checked:"BRANDED_FOOD_PRODUCTS"===this.props.searchDataSource,onChange:this.handleDataSourceChange}),"Branded Food Products"))}}]),t}(r.Component),v={setQuery:R,setDataSource:function(e){return{type:"SET_DATA_SOURCE",payload:e}},search:g},S=Object(h.c)(function(e){return{searchQuery:e.app.searchQuery,searchDataSource:e.app.searchDataSource}},v)(y),D=function(e){function t(e){var a;Object(u.a)(this,t),a=Object(l.a)(this,Object(p.a)(t).call(this,e));var r=new URLSearchParams(window.location.search);return r.has("dataSource")&&a.props.setQuery(r.get("dataSource")),r.has("query")?(a.props.setQuery(r.get("query")),a.props.search()):a.props.setQuery(""),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.searching?n.a.createElement("span",null,'Searching for "',this.props.query,'"...'):this.props.error?n.a.createElement("pre",null,n.a.createElement("code",null,JSON.stringify(this.props.error,null,2))):this.props.result?n.a.createElement(f,{result:this.props.result}):null;return n.a.createElement("div",{className:"SearchPage"},n.a.createElement("h1",null,"Search USDA API"),n.a.createElement(S,null),e)}}]),t}(r.Component),C={setQuery:R,search:g},N=Object(h.c)(function(e){return{searching:e.app.searching,query:e.app.searchQuery,result:e.app.searchResult,error:e.app.searchError}},C)(D),T=["Proximates","Vitamins","Minerals","Lipids","Other"],_=function(e,t){return T.indexOf(e.group)-T.indexOf(t.group)},k=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("table",{className:"NutrientTable"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("td",null,"id"),n.a.createElement("td",null,"Name"),n.a.createElement("td",null,"Group"),n.a.createElement("td",null,"Per 100 g"))),n.a.createElement("tbody",null,this.props.nutrients.map(function(e,t){return n.a.createElement("tr",{key:t},n.a.createElement("td",null,e.nutrient_id),n.a.createElement("td",null,e.name),n.a.createElement("td",null,e.group),n.a.createElement("td",null,"".concat(e.value," ").concat(e.unit)))})))}}]),t}(r.Component),P=(Object(h.c)(function(e){return{}},{})(k),function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=function(e){return Object(O.groupBy)(e,"group")}(function(e){return e.sort(_)}(this.props.report.nutrients));return n.a.createElement("div",{className:"Report"},Object.keys(e).map(function(t,a){return n.a.createElement(k,{nutrients:e[t],key:a})}))}}]),t}(r.Component)),A=Object(h.c)(function(e){return{}},{})(P),I=a(37),w=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.name.split(", ");return n.a.createElement("div",{className:"Breadcrumbs"},t.map(function(t,a,r){return n.a.createElement("span",{key:a},"\xa0/\xa0",n.a.createElement(I.a,{to:{pathname:"/search",search:"?query=".concat(r.slice(0,a+1).join(", "),"&dataSource=").concat(e.props.dataSource)},className:"Breadcrumbs-item"},t))}))}}]),t}(r.Component),B=Object(h.c)(function(e){return{dataSource:e.app.searchDataSource}},{})(w),F=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.report.nutrients.find(function(e){return"Energy"===e.name}),t=Math.round(Number(e.value)/105),a=Math.round(Number(e.value)/67);return n.a.createElement("div",{className:"Analysis"},n.a.createElement("div",null,e.value," ",e.unit," equal..."),n.a.createElement("div",{className:"emoji-comparator"},Object(O.times)(t,function(e){return"\ud83c\udf4c"})," ",t," medium bananas (118g)"),n.a.createElement("div",{className:"emoji-comparator"},Object(O.times)(a,function(e){return"\ud83c\udf5e"})," ",a," slices of white bread (28g)"))}}]),t}(r.Component),L=Object(h.c)(function(e){return{}},{})(F),U=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(l.a)(this,Object(p.a)(t).call(this,e))).urlNDBNO=a.props.match.params.ndbno,a.props.getReport(a.urlNDBNO),a}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"ReportPage"},n.a.createElement(I.a,{to:"/search/"},"\u2190 New Search"),n.a.createElement("h1",null,this.props.loaded?"".concat(this.props.name):"Loading report for ndbno ".concat(this.urlNDBNO),n.a.createElement("br",null),this.props.loaded&&n.a.createElement("small",null,[this.props.ds,this.props.manu,this.props.ndbno].filter(function(e){return e}).join(" \xb7 "))),this.props.loaded&&n.a.createElement(B,{name:this.props.name}),this.props.loaded&&n.a.createElement("div",{className:"ReportPage-container"},n.a.createElement("div",{className:"ReportPage-report"},n.a.createElement(A,{report:this.props.report})),n.a.createElement("div",{className:"ReportPage-analysis"},n.a.createElement(L,{report:this.props.report}))))}}]),t}(r.Component),Q={getReport:function(e){return{type:"GET_REPORT",payload:e}}},J=Object(h.c)(function(e){return{loaded:!Object(O.isUndefined)(e.app.getReportResult),report:e.app.getReportResult,name:Object(O.get)(e.app.getReportResult,"desc.name"),ds:Object(O.get)(e.app.getReportResult,"desc.ds"),manu:Object(O.get)(e.app.getReportResult,"desc.manu"),ndbno:Object(O.get)(e.app.getReportResult,"desc.ndbno")}},Q)(U),H=function(e){function t(){return Object(u.a)(this,t),Object(l.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(d.c,null,n.a.createElement(d.a,{path:"/",exact:!0,component:N}),n.a.createElement(d.a,{path:"/search",component:N}),n.a.createElement(d.a,{path:"/report/:ndbno",component:J})))}}]),t}(r.Component),q=Object(h.c)(function(e){return{}},{})(H);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var G=a(28),x=a(87),Y=a(15),M=a(60),V=a(63),W=a(31);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function K(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(a,!0).forEach(function(t){Object(V.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var Z={searching:!1,searchQuery:"",searchDataSource:"STANDARD_REFERENCE"},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case"SET_QUERY":return console.log(a,r),K({},e,{searchQuery:r});case"SET_DATA_SOURCE":return console.log(a,r),K({},e,{searchDataSource:r});case"SEARCH":return console.log(a,r),K({},e,{searching:!0,searchResult:void 0,searchError:void 0});case"SEARCH_FULFILLED":return console.log(a,r),K({},e,{searchResult:r,searching:!1});case"SEARCH_REJECTED":return console.log(a,r),K({},e,{searchError:r,searching:!1});case"GET_REPORT":return console.log(a,r),K({},e,{getReportNDBNO:r,gettingReport:!0,getReportResult:void 0,getReportError:void 0});case"GET_REPORT_FULFILLED":return console.log(a,r),K({},e,{getReportResult:r,gettingReport:!1,getReportNDBNO:void 0});case"GET_REPORT_REJECTED":return console.log(a,r),K({},e,{getReportError:r,gettingReport:!1,getReportNDBNO:void 0});default:return e}},X=function(e){return Object(G.c)({router:Object(W.b)(e),app:$})},ee=a(90),te=a(89),ae=a(83),re=a(85),ne=a(65),ce=a(48),oe=a(86),ue=a(64),se=a(88),le=a(66),pe="FYTSTF75mesLeO85VFSKvqgWEzdL0hQAYCZUtjJk",ie=Object(se.a)(function(e,t){return e.pipe(Object(ue.a)("SEARCH"),Object(te.a)(500),Object(ae.a)(function(e){return""!==t.value.app.searchQuery}),Object(re.a)(console.log(t.value)),Object(ne.a)(function(e){return ee.a.getJSON("https://api.nal.usda.gov/ndb/search?api_key=".concat(pe,"&q=").concat(encodeURIComponent(t.value.app.searchQuery),"&ds=").concat((a=t.value.app.searchDataSource,{BOTH:encodeURIComponent(""),STANDARD_REFERENCE:encodeURIComponent("Standard Reference"),BRANDED_FOOD_PRODUCTS:encodeURIComponent("Branded Food Products")}[a]))).pipe(Object(ce.a)(function(e){return e.errors?{type:"SEARCH_REJECTED",payload:e}:function(e){return{type:"SEARCH_FULFILLED",payload:e}}(e)}),Object(oe.a)(function(e){return Object(le.a)({type:"SEARCH_REJECTED",payload:e.xhr.response,error:!0})}));var a}))},function(e){return e.pipe(Object(ue.a)("GET_REPORT"),Object(te.a)(500),Object(ne.a)(function(e){return ee.a.getJSON("https://api.nal.usda.gov/ndb/V2/reports?api_key=".concat(pe,"&ndbno=").concat(encodeURIComponent(e.payload))).pipe(Object(ce.a)(function(e){return e.foods[0].error?{type:"GET_REPORT_REJECTED",payload:e}:function(e){return{type:"GET_REPORT_FULFILLED",payload:e}}(e.foods[0].food)}),Object(oe.a)(function(e){return Object(le.a)({type:"GET_REPORT_REJECTED",payload:e.xhr.response,error:!0})}))}))}),he=Object(x.a)(),de=Object(Y.a)({basename:"/usda-frontend/"});o.a.render(n.a.createElement(h.a,{store:function(e){var t=Object(G.e)(X(de),e,Object(G.d)(Object(G.a)(Object(M.a)(de),he)));return he.run(ie),t}()},n.a.createElement(W.a,{history:de},n.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[69,1,2]]]);
//# sourceMappingURL=main.0698c27a.chunk.js.map