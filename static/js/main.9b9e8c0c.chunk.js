(this["webpackJsonpusda-react"]=this["webpackJsonpusda-react"]||[]).push([[0],{252:function(e,t,a){e.exports=a(456)},257:function(e,t,a){},262:function(e,t,a){},456:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(62),o=a.n(c),i=(a(257),a(14)),u=a(15),l=a(17),s=a(16),m=a(12),p=a(33),d=(a(262),a(5)),b=a.n(d),f=a(18),h=a(28),O=function(e){return{type:"SET_QUERY",payload:e}},E=function(e){return{type:"SET_DATA_SOURCE",payload:e}},j=function(){return{type:"SEARCH"}},v=function(e){return{type:"GET_REPORT",payload:e}},y=function(e,t,a){return{type:"COMPARE_UPSERT",payload:{ndbno:e,amount:t,fallbackName:a}}},g=a(19);function R(){var e=Object(f.a)(["\n  background-color: transparent;\n  border: none;\n  cursor: pointer;\n  display: inline;\n  margin: 0;\n  padding: 0;\n  color: #5e5e5e;\n\n  &:hover {\n    color: #f06292;\n  }\n"]);return R=function(){return e},e}var S=a(227).a.button(R());function C(){var e=Object(f.a)(["\n              margin-right: 1rem;\n            "]);return C=function(){return e},e}function N(){var e=Object(f.a)(["\n          display: flex;\n          flex-direction: row;\n          align-items: baseline;\n\n          button {\n            visibility: hidden;\n          }\n          :hover {\n            button {\n              visibility: visible;\n            }\n          }\n        "]);return N=function(){return e},e}var k={compareInsert:y},D=Object(m.c)(null,k)((function(e){var t=e.item,a=e.compareInsert;return r.a.createElement("div",{className:"SearchResultItem"},r.a.createElement("div",{className:Object(g.a)(N())},r.a.createElement(h.a,{to:"/report/".concat(t.ndbno)},r.a.createElement("h3",{className:Object(g.a)(C())},t.name)),r.a.createElement(S,{onClick:Object(d.partial)(a,t.ndbno,100,t.name)},"Compare")),r.a.createElement("div",{className:"SearchResultItem-meta"},r.a.createElement("span",{className:"SearchResultItem-metaDescriptor"},r.a.createElement("strong",null,"ndbno: "),t.ndbno),r.a.createElement("span",{className:"SearchResultItem-metaDescriptor"},r.a.createElement("strong",null,"Manufacturer: "),t.manu),r.a.createElement("span",{className:"SearchResultItem-metaDescriptor"},r.a.createElement("strong",null,"Data Source: "),t.ds)))})),T=function(e){var t=e.result,a=Object(d.sortBy)(t.list.item,"name"),n=t.list.q,c=t.list.ds,o=t.list.start+1,i=Number(t.list.end),u=t.list.total;return r.a.createElement("div",{className:"SearchResult"},r.a.createElement("div",{className:"descriptor"},'Result for "',n,'" in "',c,'" (',o," to ",i," of ",u,"):"),r.a.createElement("ul",null,a.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(D,{item:e}))}))))},P=a(75),A=a(32),_=a(4),x=["Proximates","Lipids","Vitamins","Minerals","Other"],F=function(e,t){return x.indexOf(e.group)-x.indexOf(t.group)},w=function(e){return x.indexOf(e.group)},V={BOTH:"Any",STANDARD_REFERENCE:"Standard Reference",BRANDED_FOOD_PRODUCTS:"Branded Food Products"},I=Object.keys(V),M=function(e){return V[e]},B=function(e,t){return Object(d.find)(e.nutrients,{name:t})},L=function(e,t){return Number(B(e,t)?B(e,t).value:void 0)},U=function(e){return Object(_.a)(Object(_.a)({},e),{},{nutrients:e.nutrients.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(A.a)({},t.name,t))}),{})})},Q={Energy:2e3,"Total lipid (fat)":67,"Fatty acids, total saturated":20,Cholesterol:300,"Carbohydrate, by difference":300,"Fiber, total dietary":25,Protein:50,"Vitamin C, total ascorbic acid":60,"Vitamin B-6":1.2,"Vitamin B-12":6,"Vitamin E (alpha-tocopherol)":15,"Vitamin K (phylloquinone)":120,Riboflavin:1.1,Thiamin:1.1,Niacin:14,"Folate, DFE":400,"Vitamin A, RAE":600,"Vitamin D":800,"Vitamin D (D2 + D3)":20,"Calcium, Ca":1e3,"Iron, Fe":19,"Magnesium, Mg":420,"Phosphorus, P":700,"Sodium, Na":2400,"Potassium, K":3533,"Zinc, Zn":8},q={"Vitamin C, total ascorbic acid":"Vitamin C","Vitamin B-6":"Vitamin B6","Vitamin B-12":"Vitamin B12","Vitamin E (alpha-tocopherol)":"Vitamin E","Vitamin K (phylloquinone)":"Vitamin E","Calcium, Ca":"Calcium","Iron, Fe":"Iron","Magnesium, Mg":"Magnesium","Phosphorus, P":"Phosphorus","Potassium, K":"Potassium","Sodium, Na":"Sodium","Zinc, Zn":"Zinc"},J=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=B(e,t);return r?"".concat(Object(d.round)(Number(r.value*a),n)," ").concat(r.unit):null},H=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=B(t,e);return Q[e]&&r?Object(d.round)(r.value*a/Q[e]*100,n):void 0},K=a(22),G=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).stringifyState=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props.searchQuery,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.props.searchDataSource;return"?query=".concat(e,"&dataSource=").concat(t)},n.handleInputChange=function(e){n.props.setQuery(e.target.value),n.props.push(n.stringifyState(e.target.value)),n.props.searchQuery&&n.props.search()},n.handleDataSourceChange=function(e){n.props.setDataSource(e.target.value),n.props.push(n.stringifyState(void 0,e.target.value)),n.props.searchQuery&&n.props.search()},n.handleInputChange=n.handleInputChange.bind(Object(P.a)(n)),n.handleDataSourceChange=n.handleDataSourceChange.bind(Object(P.a)(n)),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"SearchBar"},r.a.createElement("label",null,r.a.createElement("input",{type:"text",className:"queryInput",value:this.props.searchQuery,onChange:this.handleInputChange,autoFocus:!0})),r.a.createElement("br",null),"Data Source:\xa0",I.map((function(t){return r.a.createElement("label",{className:"dataSourceInputLabel",key:t},r.a.createElement("input",{type:"radio",className:"dataSourceInput",value:t,checked:e.props.searchDataSource===t,onChange:e.handleDataSourceChange}),M(t))})))}}]),a}(n.Component),W={setQuery:O,setDataSource:E,search:j,push:K.d},Z=Object(m.c)((function(e){return{searchQuery:e.app.searchQuery,searchDataSource:e.app.searchDataSource}}),W)(G),Y=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"Logo"},r.a.createElement(h.a,{to:"/search"},r.a.createElement("h1",null,"USDA")))}}]),a}(n.Component),X=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var r=new URLSearchParams(window.location.search);return r.has("dataSource")&&r.get("dataSource")!==n.props.dataSource&&n.props.setDataSource(r.get("dataSource")),r.has("query")?r.get("query")!==n.props.query&&(n.props.setQuery(r.get("query")),n.props.search()):n.props.setQuery(""),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.searching?r.a.createElement("span",null,'Searching for "',this.props.query,'" in'," ",M(this.props.dataSource),"..."):this.props.error?this.props.error.errors.error.map((function(e,t){return r.a.createElement("div",{key:t,style:{color:"red"}},e.message)})):this.props.result?r.a.createElement(T,{result:this.props.result}):null;return r.a.createElement("div",{className:"SearchPage"},r.a.createElement("div",{className:"header"},r.a.createElement(Y,null),r.a.createElement(Z,null)),r.a.createElement("hr",null),r.a.createElement("div",{className:"ResultContainer"},e))}}]),a}(n.Component),z={setQuery:O,setDataSource:E,search:j},$=Object(m.c)((function(e){return{searching:e.app.searching,query:e.app.searchQuery,dataSource:e.app.searchDataSource,result:e.app.searchResult,error:e.app.searchError}}),z)(X),ee=a(208),te=a.n(ee),ae=(a(279),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.name.split(", ");return r.a.createElement("div",{className:"Breadcrumbs"},t.map((function(t,a,n){return r.a.createElement("span",{key:a},"\xa0/\xa0",r.a.createElement(h.a,{to:{pathname:"/search",search:"?query=".concat(n.slice(0,a+1).join(", "),"&dataSource=").concat(e.props.dataSource)},className:"Breadcrumbs-item"},t))})))}}]),a}(n.Component)),ne=Object(m.c)((function(e){return{dataSource:e.app.searchDataSource}}),{})(ae),re=a(21),ce=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getValue=function(t){return L(e.props.report,t)*e.props.mass/100},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.getValue("Total lipid (fat)"),t=this.getValue("Carbohydrate, by difference"),a=this.getValue("Protein"),n=this.getValue("Water"),c=this.props.mass-(e+t+a+n),o=[{name:"Total Fat",value:e},{name:"Total Carbs",value:t},{name:"Protein",value:a},{name:"Water",value:n},{name:"Other",value:c}],i=this.getValue("Fatty acids, total saturated"),u=this.getValue("Fatty acids, total polyunsaturated"),l=this.getValue("Fatty acids, total monounsaturated"),s=e-i-u-l,m=this.getValue("Fiber, total dietary"),p=this.getValue("Sugars, total"),b=[{name:"Polyunsat. Fat",value:u},{name:"Monounsat. Fat",value:l},{name:"Saturated Fat",value:i},{name:"Other Fats",value:s},{name:"Dietary Fiber",value:m},{name:"Sugar",value:p},{name:"Other Carbs",value:t-m-p},{name:"Protein",value:a},{name:"Water",value:n},{name:"Other",value:c}],f=[["#ffeb3b","#fdd835","#fbc02d","#f9a825"],["#aed581","#8bc34a","#689f38"],["#f06292"],["#2196f3"],["#e0e0e0"]],h=o.map((function(e,t){return{value:e.name,color:f[t][0]}}));return r.a.createElement(re.h,{width:500,height:275},r.a.createElement(re.g,{data:o,dataKey:"value",cx:250,cy:125,innerRadius:30,outerRadius:60,fill:"#8884d8",isAnimationActive:!1},o.map((function(e,t){return r.a.createElement(re.d,{key:t,fill:f[t][0]})}))),r.a.createElement(re.g,{data:b,dataKey:"value",cx:250,cy:125,innerRadius:70,outerRadius:90,fill:"red",labelLine:!1,label:function(e){var t=e.cx,a=e.cy,n=e.midAngle,c=e.innerRadius,o=e.outerRadius,i=e.value,u=e.index,l=e.fill;if(!function(e){return e.percent>.03}(e))return null;var s=Math.PI/180,m=10+c+(o-c),p=t+m*Math.cos(-n*s),d=a+m*Math.sin(-n*s);return i=new Intl.NumberFormat("en-IN",{maximumFractionDigits:1}).format(i),r.a.createElement("text",{x:p,y:d,fill:l,textAnchor:p>t?"start":"end",dominantBaseline:"central"},b[u].name," ",i," g")},isAnimationActive:!1},b.map((function(e,t){return r.a.createElement(re.d,{key:"index",fill:Object(d.flatten)(f)[t]})})),r.a.createElement(re.e,{value:"".concat(this.props.mass," g"),position:"center"})),r.a.createElement(re.f,{payload:h}))}}]),a}(n.PureComponent),oe=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=Math.round(this.props.calories/105),t=Math.round(this.props.calories/95),a=Math.round(this.props.calories/67),n=Math.round(this.props.calories/350);return r.a.createElement("div",{className:"Comparator"},r.a.createElement("div",{className:"Comparator-header"},r.a.createElement("h2",null,this.props.calories," kcal"),r.a.createElement("br",null),"equal"),r.a.createElement("div",{className:"emoji-comparator"},Object(d.times)(n,(function(e){return"\ud83c\udf79"})),r.a.createElement("br",null),n," Cups of Bubble Tea"),r.a.createElement("div",{className:"emoji-comparator"},Object(d.times)(e,(function(e){return"\ud83c\udf4c"})),r.a.createElement("br",null),e," Medium Bananas (118g)"),r.a.createElement("div",{className:"emoji-comparator"},Object(d.times)(t,(function(e){return"\ud83c\udf4e"})),r.a.createElement("br",null),t," Apples (182g)"),r.a.createElement("div",{className:"emoji-comparator"},Object(d.times)(a,(function(e){return"\ud83c\udf5e"})),r.a.createElement("br",null),a," Slices of White Bread (28g)"))}}]),a}(n.Component),ie=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.report.nutrients.find((function(e){return"Energy"===e.name})).value*this.props.mass/100;return r.a.createElement("div",{className:"Analysis"},r.a.createElement(ce,{report:this.props.report,mass:this.props.mass}),r.a.createElement(oe,{calories:e}))}}]),a}(n.Component),ue=Object(m.c)((function(e){return{mass:e.app.mass}}),{})(ie),le=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).datum=function(t,a){return J(e.props.report,t,e.props.factor,a)},e.reference=function(t){return"".concat(H(t,e.props.report,e.props.factor),"%")},e.datumCell=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2?arguments[2]:void 0;return r.a.createElement("td",{className:"nutTable-left ".concat(!n&&"indent-2")},n?r.a.createElement("strong",null,a," "):a+" ",e.datum(t))},e.referenceCell=function(t){return r.a.createElement("td",{className:"nutTable-right"},e.reference(t))},e.tableRow=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return B(e.props.report,a)?r.a.createElement("tr",{key:t},e.datumCell(a,n,c),e.referenceCell(a)):null},e.doubleTable=function(t){var a=t.map((function(t){return e.datumCell(t.name,q[t.name],!0)})),n=t.map((function(t){return e.referenceCell(t.name)})),c=Object(d.chunk)(a,2),o=Object(d.chunk)(n,2);return r.a.createElement("table",{className:"nutTable"},r.a.createElement("tbody",null,c.map((function(e,t){return r.a.createElement("tr",{key:t},c[t][0],o[t][0],c[t][1]||r.a.createElement("td",{className:"nutTable-left"}),o[t][1]||r.a.createElement("td",{className:"nutTable-right"}))}))))},e.tableRows=[{label:"Calories",key:"Energy",main:!0},{label:"Total Fat",key:"Total lipid (fat)",main:!0},{label:"Saturated fat",key:"Fatty acids, total saturated",main:!1},{label:"Polyunsaturated fat",key:"Fatty acids, total polyunsaturated",main:!1},{label:"Monounsaturated fat",key:"Fatty acids, total monounsaturated",main:!1},{label:"Water",key:"Water",main:!0},{label:"Cholesterol",key:"Cholesterol",main:!0},{label:"Sodium",key:"Sodium, Na",main:!0},{label:"Potassium",key:"Potassium, K",main:!0},{label:"Total Carbohydrate",key:"Carbohydrate, by difference",main:!0},{label:"Dietary fiber",key:"Fiber, total dietary",main:!1},{label:"Sugar",key:"Sugars, total",main:!1},{label:"Protein",key:"Protein",main:!0}],e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=function(e){return Object(d.groupBy)(e,"group")}(function(e){return e.sort(F)}(this.props.report.nutrients));return r.a.createElement("div",{className:"Report"},r.a.createElement("table",{className:"nutTable"},r.a.createElement("tbody",null,this.tableRows.map((function(t,a){return e.tableRow(a,t.key,t.label,t.main)})))),t.Vitamins&&this.doubleTable(t.Vitamins),t.Minerals&&this.doubleTable(t.Minerals),t.Other&&this.doubleTable(t.Other))}}]),a}(n.Component),se=Object(m.c)((function(e){return{mass:e.app.mass,factor:e.app.mass/100}}),{})(le);function me(){var e=Object(f.a)(["\n        margin-top: 2rem;\n        margin-left: 2rem;\n        border: 8px solid #f06292;\n        border-top: 8px solid transparent; /* Blue */\n        border-radius: 50%;\n        width: 80px;\n        height: 80px;\n        animation: spin 1s linear infinite;\n\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      "]);return me=function(){return e},e}var pe=function(e){return r.a.createElement("div",{className:Object(g.a)(me())},"Loading")},de=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).sliderPrecision=function(e){return e<25?1:e<100?5:e<500?10:50},n.urlNDBNO=n.props.match.params.ndbno,n.props.getReport(n.urlNDBNO),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.compareInsert,a=e.ndbno,n=e.mass;return r.a.createElement("div",{className:"ReportPage"},r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement("h1",null,this.props.loaded?"".concat(this.props.name):"Loading report for ndbno ".concat(this.urlNDBNO),r.a.createElement("button",{onClick:function(){return t(a,n)}},"Compare")),r.a.createElement("div",{className:"descriptor"},this.props.loaded&&r.a.createElement("small",null,[this.props.ds,this.props.manu,this.props.ndbno].filter((function(e){return e})).join(" \xb7 "))),this.props.loaded&&r.a.createElement(ne,{name:this.props.name}),r.a.createElement(h.a,{to:"/search/",className:"newSearchLink"},"\u2190 New Search"),r.a.createElement(te.a,{className:"massInput",minValue:0,maxValue:1e3,step:this.sliderPrecision(this.props.mass),value:this.props.mass,onChange:this.props.setMass,formatLabel:function(e){return"Mass ".concat(e," g")}}))),this.props.loaded?r.a.createElement("div",{className:"ReportPage-container"},r.a.createElement("div",{className:"ReportPage-report"},r.a.createElement(se,{report:this.props.report})),r.a.createElement("div",{className:"ReportPage-analysis"},r.a.createElement(ue,{report:this.props.report}))):r.a.createElement(pe,null))}}]),a}(n.Component),be={getReport:v,setMass:function(e){return{type:"SET_MASS",payload:e}},compareInsert:y},fe=Object(m.c)((function(e){return{loaded:!Object(d.isUndefined)(e.app.getReportResult),report:e.app.getReportResult,name:Object(d.get)(e.app.getReportResult,"desc.name"),ds:Object(d.get)(e.app.getReportResult,"desc.ds"),manu:Object(d.get)(e.app.getReportResult,"desc.manu"),ndbno:Object(d.get)(e.app.getReportResult,"desc.ndbno"),mass:e.app.mass}}),be)(de),he=a(114),Oe=a(56),Ee=a(149),je=a(221),ve=a.n(je),ye=a(148),ge=function(e){return e.app.reports},Re=Object(ye.a)([ge],Object.keys),Se=(Object(ye.a)([ge],Object.values),function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={error:null},n}return Object(u.a)(a,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("code",null,"error in subtree"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),a}(r.a.Component)),Ce=a(228);function Ne(){var e=Object(f.a)(["\n                margin-top: 1rem;\n              "]);return Ne=function(){return e},e}function ke(){var e=Object(f.a)(["\n            display: flex;\n            flex-direction: column;\n            margin-right: 1rem;\n            min-width: 200px;\n          "]);return ke=function(){return e},e}function De(){var e=Object(f.a)(["\n          display: flex;\n          flex-direction: row;\n        "]);return De=function(){return e},e}var Te=function(e){return e.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(A.a)({},t.name,Object(_.a)({selected:["Proximates"].includes(t.group)},t)))}),{})},Pe=function(e){var t=e.nutrients,a=e.setNutrients,c=e.className,o=Object(Ce.a)(e,["nutrients","setNutrients","className"]),i=Object(n.useState)(Te(t)),u=Object(Oe.a)(i,2),l=u[0],s=u[1],m=Object(d.groupBy)(Object.values(l),"group");Object(n.useEffect)((function(){s((function(e){return Object(_.a)(Object(_.a)({},Te(t)),e)}))}),[t]),Object(n.useEffect)((function(){a(Object.values(l))}),[l,a]);var p=function(e,t){s(Object(d.mapValues)(l,(function(a){return a.group===e?Object(d.set)(a,"selected",t):a})))},b=function(e){return s((function(t){return Object(_.a)(Object(_.a)({},t),{},Object(A.a)({},e,Object(_.a)(Object(_.a)({},t[e]),{},{selected:!t[e].selected})))}))};return r.a.createElement("div",Object.assign({className:Object(g.a)(De())+" ".concat(c)},o),Object(d.map)(m,(function(e,t){return r.a.createElement("div",{key:t,className:Object(g.a)(ke())},r.a.createElement("h4",null,t),r.a.createElement("hr",null),Object(d.map)(e,(function(e){var t=e.name;return r.a.createElement("label",{key:t},r.a.createElement("input",{type:"checkbox",name:t,checked:l[t]&&l[t].selected,onChange:Object(d.partial)(b,t)}),t)})),e.length>1&&r.a.createElement("div",{className:Object(g.a)(Ne())},r.a.createElement(S,{onClick:Object(d.partial)(p,t,!0)},"Select All")," ","\xb7"," ",r.a.createElement(S,{onClick:Object(d.partial)(p,t,!1)},"Select None")))})))};function Ae(){var e=Object(f.a)(["\n          margin-top: 2rem;\n        "]);return Ae=function(){return e},e}function _e(){var e=Object(f.a)(["\n          margin-top: 2rem;\n        "]);return _e=function(){return e},e}function xe(){var e=Object(f.a)(["\n        padding: 2rem 1rem;\n      "]);return xe=function(){return e},e}var Fe=["#f44336","#e91e63","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688"],we=[{name:"Name",sortable:!0,compact:!0,selector:function(e){return Object(d.get)(e,"desc.name")},cell:function(e){return r.a.createElement(h.a,{to:"/report/".concat(e.desc.ndbno)},e.desc.name)}}],Ve={getReport:v,compareSet:function(e){return{type:"COMPARE_SET",payload:e}}},Ie=Object(m.c)((function(e){var t=new URLSearchParams(Object(d.get)(e,"router.location.search","")).get("ids"),a=t?t.split(","):[];return{cachedIds:Re(e),ids:a,reports:Object.values(Object(d.pick)(ge(e),a)).map(U)}}),Ve)(Object(p.f)((function(e){var t=e.ids,a=e.cachedIds,c=e.reports,o=e.getReport,i=e.compareSet;Object(Ee.a)((function(){Object(d.difference)(t,a).forEach(o)}),[t,a,o]),Object(Ee.a)((function(){i(t.map((function(e){return{ndbno:e,amount:100}})))}),[t,i]);var u=Object(n.useMemo)((function(){return Object(d.chain)(c).map("nutrients").flatMap(Object.values).sortBy(w).map(Object(d.partial)(d.pick,b.a,["name","group"])).uniq().value()}),[c]),l=Object(n.useState)(null),s=Object(Oe.a)(l,2),m=s[0],p=s[1],f=Object(d.chain)(m).filter("selected").map((function(e){return{name:e.name,selector:function(t){return Number(Object(d.get)(t,["nutrients",e.name,"value"]))},format:function(t){return J(t,e.name,1,2)},sortable:!0,compact:!0}})).value(),h=[].concat(we,Object(he.a)(f)),O=Object(n.useState)(),E=Object(Oe.a)(O,2),j=E[0],v=E[1],y=j?Object(d.sortBy)(c,j.selector):c;j&&"asc"!==j.direction&&(y=y.reverse());var R=c.reduce((function(e,t){return Object(_.a)(Object(_.a)({},e),{},Object(A.a)({},t.desc.ndbno,Object(d.indexOf)(y,t)))}),{}),S=Object(d.chain)(f).map((function(e){return Object(_.a)({name:e.name},Object(d.reduce)(c,(function(t,a){return Object(_.a)(Object(_.a)({},t),{},Object(A.a)({},R[a.desc.ndbno],H(e.name,a,1,2)))}),{}))})).value();return r.a.createElement("div",{className:Object(g.a)(xe())},r.a.createElement(Y,null),r.a.createElement(Pe,{nutrients:u,setNutrients:p,className:Object(g.a)(_e())}),r.a.createElement(Se,null,r.a.createElement(ve.a,{columns:h,data:c,title:"Reports",responsive:!0,dense:!0,onSort:function(e,t){return v(Object(_.a)(Object(_.a)({},e),{},{direction:t}))}})),r.a.createElement(re.i,{width:"100%",height:300,className:Object(g.a)(Ae())},r.a.createElement(re.b,{data:S},r.a.createElement(re.c,{strokeDasharray:"3 3"}),r.a.createElement(re.k,{dataKey:"name"}),r.a.createElement(re.l,null),r.a.createElement(re.j,null),r.a.createElement(re.f,null),y.map((function(e,t){return r.a.createElement(re.a,{key:t,dataKey:t,name:y[t].desc.name,fill:Fe[c.indexOf(e)%Fe.length]})})))))})));function Me(){var e=Object(f.a)(["\n                    max-width: 200px;\n                    text-overflow: ellipsis;\n                    overflow: hidden;\n                    white-space: nowrap;\n                  "]);return Me=function(){return e},e}function Be(){var e=Object(f.a)(["\n            display: ",";\n            margin: 0;\n            margin-top: 0.5rem;\n            padding: 0.5rem;\n          "]);return Be=function(){return e},e}function Le(){var e=Object(f.a)(["\n              margin: 0;\n            "]);return Le=function(){return e},e}function Ue(){var e=Object(f.a)(["\n            display: flex;\n            justify-content: space-between;\n            background-color: #eaeaea;\n            padding: 0.5rem;\n          "]);return Ue=function(){return e},e}function Qe(){var e=Object(f.a)(["\n          display: ",";\n          position: fixed;\n          bottom: 0;\n          right: 5rem;\n          border: 1px solid black;\n          border-bottom: none;\n          background-color: white;\n          min-width: 300px;\n        "]);return Qe=function(){return e},e}function qe(){var e=Object(f.a)(["\n      display: flex;\n      justify-content: space-between;\n      padding: 0.5rem;\n    "]);return qe=function(){return e},e}var Je=function(e){return r.a.createElement("div",Object.assign({className:Object(g.a)(qe())},e))},He=Object(p.f)((function(e){var t=e.compare,a=e.compareClear,c=e.compareRemove,o=e.location,i=t.length>0&&"/compare"!==o.pathname,u=Object(n.useState)(!0),l=Object(Oe.a)(u,2),s=l[0],m=l[1],p=Object(d.map)(t,"ndbno").join(",");return r.a.createElement("div",{className:Object(g.a)(Qe(),i?"initial":"none")},r.a.createElement("div",{className:Object(g.a)(Ue()),onClick:function(){return m(!s)}},r.a.createElement("h3",{className:Object(g.a)(Le())},"Collection ",r.a.createElement("small",null,"(",t.length,")")),s?" \ud83d\udd3c":" \ud83d\udd3d"),r.a.createElement("table",{className:Object(g.a)(Be(),s?"visible":"none")},r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.ndbno},r.a.createElement("td",{className:Object(g.a)(Me()),title:e.report?e.report.desc.name:e.ndbno},e.report?e.report.desc.name:e.fallbackName),r.a.createElement("td",null,e.amount," g"),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return c(e.ndbno)}},"X")))})))),r.a.createElement(Je,{style:{display:s?"flex":"none"}},r.a.createElement("button",{onClick:a},"Clear Collection"),r.a.createElement(h.a,{to:"/compare?ids=".concat(p)},"Go to Collection")))})),Ke={compareClear:function(){return{type:"COMPARE_CLEAR"}},compareRemove:function(e){return{type:"COMPARE_REMOVE",payload:e}}},Ge=Object(m.c)((function(e){return{compare:e.app.compare.map((function(t){return Object(_.a)(Object(_.a)({},t),{},{report:e.app.reports[t.ndbno]})}))}}),Ke)(He),We=a(46),Ze=a(50),Ye=a(462),Xe=a(26),ze=a(204),$e={searching:!1,searchQuery:"",searchDataSource:"STANDARD_REFERENCE",mass:100,reports:{},compare:[]},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(console.log(a,n),a){case"SET_QUERY":return Object(_.a)(Object(_.a)({},e),{},{searchQuery:n,searchResult:void 0,searchError:void 0});case"SET_DATA_SOURCE":return Object(_.a)(Object(_.a)({},e),{},{searchDataSource:n,searchResult:void 0,searchError:void 0});case"SEARCH":return""===e.searchQuery?Object(_.a)(Object(_.a)({},e),{},{searching:!1,searchResult:void 0,searchError:void 0}):Object(_.a)(Object(_.a)({},e),{},{searching:!0,searchResult:void 0,searchError:void 0});case"SEARCH_FULFILLED":return Object(_.a)(Object(_.a)({},e),{},{searchResult:n,searching:!1});case"SEARCH_REJECTED":return Object(_.a)(Object(_.a)({},e),{},{searchError:n,searching:!1});case"GET_REPORT":return Object(_.a)(Object(_.a)({},e),{},{getReportNDBNO:n,gettingReport:!0,getReportResult:void 0,getReportError:void 0});case"GET_REPORT_FULFILLED":return Object(_.a)(Object(_.a)({},e),{},{getReportResult:n,gettingReport:!1,getReportNDBNO:void 0,reports:Object(_.a)(Object(_.a)({},e.reports),{},Object(A.a)({},n.desc.ndbno,n))});case"GET_REPORT_REJECTED":return Object(_.a)(Object(_.a)({},e),{},{getReportError:n,gettingReport:!1,getReportNDBNO:void 0});case"SET_MASS":return Object(_.a)(Object(_.a)({},e),{},{mass:n});case"COMPARE_SET":return Object(_.a)(Object(_.a)({},e),{},{compare:n});case"COMPARE_UPSERT":return Object(_.a)(Object(_.a)({},e),{},{compare:Object(d.uniqBy)([n].concat(Object(he.a)(e.compare)),"ndbno")});case"COMPARE_REMOVE":return Object(_.a)(Object(_.a)({},e),{},{compare:e.compare.filter((function(e){return e.ndbno!==n}))});case"COMPARE_CLEAR":return Object(_.a)(Object(_.a)({},e),{},{compare:$e.compare});default:return e}},tt=a(466),at=a(465),nt=a(457),rt=a(464),ct=a(224),ot=a(109),it=a(461),ut=a(223),lt=a(463),st=a(225),mt="FYTSTF75mesLeO85VFSKvqgWEzdL0hQAYCZUtjJk",pt=Object(lt.a)((function(e,t){return e.pipe(Object(ut.a)("SEARCH"),Object(at.a)(500),Object(nt.a)((function(e){return""!==t.value.app.searchQuery})),Object(rt.a)(console.log(t.value)),Object(ct.a)((function(e){return tt.a.getJSON("https://api.nal.usda.gov/ndb/search?api_key=".concat(mt,"&q=").concat(encodeURIComponent(t.value.app.searchQuery),"&ds=").concat((a=t.value.app.searchDataSource,{BOTH:encodeURIComponent(""),STANDARD_REFERENCE:encodeURIComponent("Standard Reference"),BRANDED_FOOD_PRODUCTS:encodeURIComponent("Branded Food Products")}[a]))).pipe(Object(ot.a)((function(e){return e.errors?{type:"SEARCH_REJECTED",payload:e}:function(e){return{type:"SEARCH_FULFILLED",payload:e}}(e)})),Object(it.a)((function(e){return Object(st.a)({type:"SEARCH_REJECTED",payload:e.xhr.response,error:!0})})));var a})))}),(function(e){return e.pipe(Object(ut.a)("GET_REPORT"),Object(at.a)(500),Object(ct.a)((function(e){return tt.a.getJSON("https://api.nal.usda.gov/ndb/V2/reports?api_key=".concat(mt,"&ndbno=").concat(encodeURIComponent(e.payload))).pipe(Object(ot.a)((function(e){return e.foods[0].error?{type:"GET_REPORT_REJECTED",payload:e}:function(e){return{type:"GET_REPORT_FULFILLED",payload:e}}(e.foods[0].food)})),Object(it.a)((function(e){return Object(st.a)({type:"GET_REPORT_REJECTED",payload:e.xhr.response,error:!0})})))})))})),dt=Object(Ye.a)(),bt=Object(Xe.a)({basename:"/usda-frontend/"});var ft=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(We.a,{history:bt,basename:"/usda-frontend"},r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,component:$}),r.a.createElement(p.a,{path:"/search",exact:!0,component:$}),r.a.createElement(p.a,{path:"/report/:ndbno",component:fe}),r.a.createElement(p.a,{path:"/compare",exact:!0,component:Ie})),r.a.createElement(Ge,null)))}}]),a}(n.Component),ht=Object(m.c)((function(e){return{}}),{})(ft);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(m.a,{store:function(e){var t,a=Object(Ze.e)((t=bt,Object(Ze.c)({router:Object(We.b)(t),app:et})),e,Object(Ze.d)(Object(Ze.a)(Object(ze.a)(bt),dt),(window.__REDUX_DEVTOOLS_EXTENSION__,function(e){return e})));return dt.run(pt),a}()},r.a.createElement(We.a,{history:bt},r.a.createElement(ht,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[252,1,2]]]);
//# sourceMappingURL=main.9b9e8c0c.chunk.js.map